webpackJsonp([1],{"+8LF":function(e,t){},0:function(e,t){},"0knf":function(e,t){},"1Kqt":function(e,t){},"3GzM":function(e,t,a){e.exports=a.p+"static/img/notice.3a198a1.png"},"4+h7":function(e,t){},"4Wgt":function(e,t){},"52we":function(e,t){},"5HrG":function(e,t){},"5J8+":function(e,t){},"5W1q":function(e,t){},"7Otq":function(e,t,a){e.exports=a.p+"static/img/logo.6ce1e2c.png"},"8Q3I":function(e,t){},AMrm:function(e,t){},BGDE:function(e,t){},CjTb:function(e,t){},"I+wb":function(e,t){},Jwbx:function(e,t,a){e.exports=a.p+"static/img/u152.dec8617.jpg"},Kjef:function(e,t){},Mf1u:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),i={inject:["reload"],name:"MyHeader",data:function(){return{msg:"中国移动网络场景识别平台",activeIndex:"",headSearch:"",flag:!1,userID:":userID"}},mounted:function(){null!==this.getCookie("userID")&&(this.userID=this.getCookie("userID"),this.flag=!0,this.$router.push({name:"home",params:{userID:this.userID}})),"home"===this.$route.name&&(this.activeIndex="1");var e=this.getCookie("navi");null!==e&&this.handleSelect(e),!1===this.flag&&this.$router.push({name:"login"})},methods:{handleSelect:function(e){switch(e){case"1":this.setUrlCookie("navi","1",864e5),this.$router.push({name:"home",params:{userID:this.userID}}),this.activeIndex="1";break;case"2":this.setUrlCookie("navi","2",864e5),this.$router.push({name:"missionDetail",params:{userID:this.userID}}),this.activeIndex="2";break;case"3":this.setUrlCookie("navi","3",864e5),this.$router.push({name:"scene",params:{userID:this.userID}}),this.activeIndex="3";break;case"4":this.setUrlCookie("navi","4",864e5),this.$router.push({name:"inquire",params:{userID:this.userID}}),this.activeIndex="4";break;case"5":this.setUrlCookie("navi","5",864e5),this.$router.push({name:"system",params:{userID:this.userID}}),this.activeIndex="5";break;case"6":this.setUrlCookie("navi","6",864e5),this.$router.push({name:"apply",params:{userID:this.userID}}),this.activeIndex="6"}},logOut:function(){var e=new URLSearchParams,t=this.setAPIPath("/logout");e.append("userID",this.userID),this.$axios.post(t,e).then(function(e){e.data.code}).catch(function(e){console.log(e)}),this.userID=":userID",this.delCookie("userID"),this.delCookie("navi"),this.flag=!1,this.$router.push({name:"login",params:{userID:":userID"}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container top"},[e._m(0),e._v(" "),a("h3",[e._v(e._s(e.msg))]),e._v(" "),a("div",{staticClass:"panel"})]),e._v(" "),a("div",{staticClass:"container navi"},[a("el-menu",{staticClass:"menuWidth",attrs:{"default-active":e.activeIndex,"active-text-color":"white",mode:"horizontal"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[a("router-link",{attrs:{to:"/home/:userID",tag:"a"}},[e._v("首页")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"2"}},[a("router-link",{attrs:{to:"/missionDetail/:userID",tag:"a"}},[e._v("任务管理")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"3"}},[a("router-link",{attrs:{to:"/scene/:userID",tag:"a"}},[e._v("场景识别")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"4"}},[a("router-link",{attrs:{to:"/inquire/:userID",tag:"a"}},[e._v("数据管理")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"5"}},[a("router-link",{attrs:{to:"/system/:userID",tag:"a"}},[e._v("系统管理")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"6"}},[a("router-link",{attrs:{to:"/system/:userID",tag:"a"}},[e._v("应用案例")])],1),e._v(" "),a("div",{class:{show:e.flag},attrs:{id:"log"}},[a("div",{staticClass:"login"},[a("router-link",{attrs:{to:"/home/login/:userID",tag:"a"}},[e._v("登录")])],1)]),e._v(" "),a("div",{staticClass:"user",class:{show:!e.flag}},[a("div",{staticClass:"showUser"},[e._v("欢迎您，"+e._s(e.userID))]),e._v(" "),a("div",{staticClass:"logOut"},[a("div",{on:{click:e.logOut}},[e._v("注销")])])])],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:a("7Otq"),alt:"img"}})])}]};var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("h5",[a("span",[e._v(e._s(e.Cname))]),e._v(" "),a("span",[e._v(e._s(e.right))]),e._v(" "),a("span",[e._v(e._s(e.record))])])])},staticRenderFns:[]};var n={name:"App",data:function(){return{isRouterAlive:!0}},provide:function(){return{reload:this.reload}},components:{newHeader:a("VU/8")(i,l,!1,function(e){a("k9V4"),a("YYjt")},"data-v-54fc4cb3",null).exports,newFooter:a("VU/8")({name:"MyFooter",data:function(){return{Cname:"珠海世纪鼎利科技股份有限公司",right:"版权所有©2016",record:"粤ICP备11031566号-1"}}},r,!1,function(e){a("Mf1u")},"data-v-11b59ad2",null).exports},mounted:function(){},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.isRouterAlive?t("newHeader"):this._e(),this._v(" "),t("router-view"),this._v(" "),t("newFooter")],1)},staticRenderFns:[]};var c=a("VU/8")(n,o,!1,function(e){a("vZwe")},null,null).exports,u=a("/ocq"),d=a("zL8q"),h=a.n(d),m=(a("tvR6"),a("BO1k")),p=a.n(m),g={data:function(){return{missionList:[],user:""}},created:function(){this.user=this.getCookie("userID"),this.getNewmission()},methods:{getNewmission:function(){var e=this;this.missionList.length=0;var t=new URLSearchParams,a=this.setAPIPath("/task/"+this.user);this.$axios.get(a,t).then(function(t){if(0===t.data.code){for(var a=0;a<t.data.data.length;a++){var s=t.data.data[a],i="";switch(s.taskStatus){case 0:i="创建";break;case 1:i="发布";break;case 2:i="拍摄";break;case 3:i="上传";break;case 4:i="完成";break;default:i=""}s.taskStatus=i,e.missionList.push(t.data.data[a])}e.sortByTime()}}).catch(function(e){console.log(e)})},sortByTime:function(){this.missionList.sort(function(e,t){return t.taskProduceTime-e.taskProduceTime}),this.missionList.length>10&&(this.missionList.length=10);var e=!0,t=!1,a=void 0;try{for(var s,i=p()(this.missionList);!(e=(s=i.next()).done);e=!0){var l=s.value;l.taskPublishTime=this.dateFormat(l.taskPublishTime),l.taskProduceTime=this.dateFormat(l.taskProduceTime),l.taskPlanCompleteTime=this.dateFormat(l.taskPlanCompleteTime,1)}}catch(e){t=!0,a=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw a}}}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer home"},[e._m(0),e._v(" "),a("div",{staticClass:"homeTableContain"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.missionList}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{inline:""}},[a("el-form-item",{attrs:{label:"任务名称："}},[a("span",[e._v(e._s(t.row.taskName))])]),e._v(" "),a("el-form-item",{attrs:{label:"拍摄经度："}},[a("span",[e._v(e._s(t.row.takePhotoLongitude))])]),e._v(" "),a("el-form-item",{attrs:{label:"拍摄纬度："}},[a("span",[e._v(e._s(t.row.takePhotoLatitude))])]),e._v(" "),a("el-form-item",{attrs:{label:"海拔高度："}},[a("span",[e._v(e._s(t.row.takePhotoAltitude))])]),e._v(" "),a("el-form-item",{attrs:{label:"拍摄下倾角："}},[a("span",[e._v(e._s(t.row.takePhotoElevationAngle))])]),e._v(" "),a("el-form-item",{attrs:{label:"方向角起点："}},[a("span",[e._v(e._s(t.row.takePhotoDirectAngleBegin))])]),e._v(" "),a("el-form-item",{attrs:{label:"方向角终点："}},[a("span",[e._v(e._s(t.row.takePhotoDirectAngleEnd))])]),e._v(" "),a("el-form-item",{attrs:{label:"拍摄偏移角："}},[a("span",[e._v(e._s(t.row.takePhotoDirectAngleRotate))])]),e._v(" "),a("el-form-item",{attrs:{label:"拍摄图片数："}},[a("span",[e._v(e._s(t.row.takePhotoNum))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建者："}},[a("span",[e._v(e._s(t.row.taskProducerID))])]),e._v(" "),a("el-form-item",{attrs:{label:"任务状态："}},[a("span",[e._v(e._s(t.row.taskStatus))])]),e._v(" "),a("el-form-item",{attrs:{label:"接收人："}},[a("span",[e._v(e._s(t.row.taskConsumerID))])]),e._v(" "),a("el-form-item",{attrs:{label:"计划完成日期："}},[a("span",[e._v(e._s(t.row.taskPlanCompleteTime))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"taskProduceTime",label:"创建时间","header-align":"center",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bscID",label:"基站ID","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cellID",label:"小区ID","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskID",label:"任务ID","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskStatus",label:"任务状态","header-align":"center",align:"center"}})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"top"},[t("img",{attrs:{src:a("d/6q"),alt:"img"}}),this._v(" "),t("div",[this._v("最新任务")])])}]};var v={data:function(){return{newData:[]}},created:function(){this.getNewData()},methods:{getNewData:function(){var e=this;this.newData.length=0;var t=new URLSearchParams,a=this.getCookie("userID"),s=this.setAPIPath("/lastTaskPic/"+a);this.$axios.get(s,t).then(function(t){if(0===t.data.code){e.newData.length=0;var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;n.picTime=e.dateFormat(n.picTime),n.picLongitude=Math.ceil(1e5*n.picLongitude)/1e5,n.picLatitude=Math.ceil(1e5*n.picLatitude)/1e5,e.newData.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}}).catch(function(e){console.log(e)})}}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"outer home"},[this._m(0),this._v(" "),t("el-table",{staticStyle:{width:"100%","padding-left":"15px"},attrs:{data:this.newData}},[t("el-table-column",{attrs:{prop:"picTime",label:"拍摄时间",width:"180"}}),this._v(" "),t("el-table-column",{attrs:{prop:"taskID",label:"任务ID"}}),this._v(" "),t("el-table-column",{attrs:{label:"拍摄经度",prop:"picLongitude"}}),this._v(" "),t("el-table-column",{attrs:{label:"拍摄纬度",prop:"picLatitude"}}),this._v(" "),t("el-table-column",{attrs:{label:"方向角",prop:"picDirectAngle"}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"top"},[t("img",{attrs:{src:a("3GzM"),alt:"img"}}),this._v(" "),t("div",[this._v("最新数据")])])}]};var I={data:function(){return{taskTotal:"",taskFinished:"",picTotal:"",cellTotal:"",sceneRegconitionTotal:""}},components:{left:a("VU/8")(g,f,!1,function(e){a("tdSZ")},null,null).exports,right:a("VU/8")(v,b,!1,function(e){a("I+wb")},null,null).exports},created:function(){this.getSumarryData()},methods:{getSumarryData:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/sourceSummary");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=t.data.data;e.taskTotal=a.taskTotal,e.taskFinished=a.picTotal,e.sceneRegconitionTotal=a.sceneRegconitionTotal,e.taskFinished=a.taskFinished,e.cellTotal=a.cellTotal,e.picTotal=a.picTotal}}).catch(function(e){console.log(e)})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container layout"},[e._m(0),e._v(" "),a("div",{staticClass:"middle"},[e._v("\n      资源总数：\n      "),a("div",{staticClass:"iconPlane"},[e._v("任务总数"),a("span",[e._v(e._s(e.taskTotal))]),e._v("项")]),e._v(" "),a("div",{staticClass:"iconPlane"},[e._v("已完任务"),a("span",[e._v(e._s(e.taskFinished))]),e._v("项")]),e._v(" "),a("div",{staticClass:"iconPlane"},[e._v("拍摄数据"),a("span",[e._v(e._s(e.picTotal))]),e._v("项")]),e._v(" "),a("div",{staticClass:"iconPlane"},[e._v("小区数"),a("span",[e._v(e._s(e.cellTotal))]),e._v("个")]),e._v(" "),a("div",{staticClass:"iconPlane"},[e._v("场景识别"),a("span",[e._v(e._s(e.sceneRegconitionTotal))]),e._v("个")])]),e._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"left"},[a("left")],1),e._v(" "),a("div",{staticClass:"right"},[a("right")],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"banner"},[t("img",{attrs:{src:a("Jwbx"),alt:"img"}})])}]};var C=a("VU/8")(I,k,!1,function(e){a("eet9")},"data-v-760036e8",null).exports,P={inject:["reload"],data(){var e=(e,t,a)=>{isNaN(this.formInline[e.fullField])?a(new Error("只能填数字！")):parseFloat(this.formInline[e.fullField])<0?a(new Error("不能小于0！")):(this.formInline[e.fullField]=parseFloat(this.formInline[e.fullField]),a())};return{formInline:{taskName:"",bscID:"",cellID:"",takePhotoLongitude:"",takePhotoLatitude:"",takePhotoAltitude:"",takePhotoElevationAngle:"",takePhotoDirectAngleBegin:"",takePhotoDirectAngleEnd:"",takePhotoDirectAngleRotate:"",takePhotoNum:"",taskProducerID:"",taskProduceTime:"",taskConsumerID:"",taskPlanCompleteTime:"",directAngle:"",bscIDCellId:[]},options:[],rules:{taskName:[{required:!0,message:"不能为空！",trigger:"blur"}],bscIDCellId:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:(e,t,a)=>{this.formInline.bscIDCellId.length<2?a(new Error("请选择具体小区！")):a()},trigger:"blur"}],takePhotoLongitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoLatitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoDirectAngleBegin:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoDirectAngleEnd:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:(e,t,a)=>{isNaN(this.formInline[e.fullField])?a(new Error("只能填数字！")):parseFloat(this.formInline[e.fullField])<=parseFloat(this.formInline.takePhotoDirectAngleBegin)?a(new Error("要比方向角起点大！")):parseFloat(this.formInline[e.fullField])<0?a(new Error("不能小于0！")):(this.formInline[e.fullField]=parseFloat(this.formInline[e.fullField]),a())},trigger:"blur"}],takePhotoDirectAngleRotate:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoAltitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoElevationAngle:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],taskConsumerID:[{required:!0,message:"不能为空！",trigger:"blur"}],taskPlanCompleteTime:[{required:!0,message:"不能为空！",trigger:"blur"}]},zoom:16,positionMission:[113.58811,22.23263],center:[],user:"",index:"",page:"",checkForm:[],flag:!1,unEdit:!1,result:!1,reciverList:[],cellList:[],bscList:[],missionList:[],isOpenMap:!0,mapEvents:{click:e=>{let t=this.gcjToWgsExactly(e.lnglat.lat,e.lnglat.lng),a=t.lon,s=t.lat;this.formInline.takePhotoLongitude=Math.ceil(1e5*a)/1e5,this.formInline.takePhotoLatitude=Math.ceil(1e5*s)/1e5,this.positionMission=[e.lnglat.lng,e.lnglat.lat]}}}},watch:{AngleEnd(e,t){this.countPhotoNum()},AngleBegin(e,t){this.countPhotoNum()},AngleRotate(e,t){this.countPhotoNum()},takePhotoLongitude(e,t){if(e){let t=this.wgsToGcj(this.takePhotoLatitude,e),a=t.lon,s=t.lat;this.positionMission=[a,s]}},takePhotoLatitude(e,t){if(e){let t=this.wgsToGcj(e,this.takePhotoLongitude),a=t.lon,s=t.lat;this.positionMission=[a,s]}}},computed:{AngleEnd(){return this.formInline.takePhotoDirectAngleEnd},AngleBegin(){return this.formInline.takePhotoDirectAngleBegin},AngleRotate(){return this.formInline.takePhotoDirectAngleRotate},takePhotoLongitude(){return this.formInline.takePhotoLongitude},takePhotoLatitude(){return this.formInline.takePhotoLatitude}},created(){this.center=this.positionMission,this.user=this.getCookie("userID"),this.index=this.$route.params.index,this.page=this.$route.params.page,"missionDetail"===this.page?(this.flag=!0,this.getMissionAbout()):"missionEdit"===this.page&&(this.unEdit=!0,this.getMissionEdit()),this.getReciver(),this.getCell()},methods:{clear(){for(var e in this.formInline)this.formInline[e]="bscIDCellId"!==e?"":[]},change(e){if(e[1]){this.formInline.takePhotoLongitude=e[1].longitude,this.formInline.takePhotoLatitude=e[1].latitude,this.formInline.takePhotoAltitude=e[1].altitude,this.formInline.takePhotoElevationAngle=e[1].elevationAngle,this.formInline.directAngle=e[1].directAngle,this.formInline.taskName=e[1].cellName,this.formInline.takePhotoDirectAngleRotate=20;let t=e[1].directAngle;this.formInline.takePhotoDirectAngleBegin=t-60<0?t-60+360:t-60,this.formInline.takePhotoDirectAngleEnd=e[1].directAngle+60,this.countPhotoNum(),this.formInline.taskConsumerID=this.reciverList[0].userID,this.formInline.taskPlanCompleteTime=new Date}else this.formInline.takePhotoLongitude="",this.formInline.takePhotoLatitude="",this.formInline.takePhotoAltitude="",this.formInline.takePhotoElevationAngle=""},getBscTree(){for(var e=0,t=this.bscList.length;e<t;e++){var a={};a.label=this.bscList[e].bscName,a.value=this.bscList[e].bscID,a.children=this.getCellTree(this.bscList[e].bscID),this.options.push(a)}},getCellTree(e){for(var t=[],a=0,s=this.cellList.length;a<s;a++){var i={label:"",value:[],cell:{}};this.cellList[a].bscID===e&&(i.label=this.cellList[a].cellName,i.value=this.cellList[a],t.push(i))}return t},getCell(){let e=new URLSearchParams,t=this.setAPIPath("/cell");this.$axios.get(t,e).then(e=>{if(0===e.data.code){for(let t of e.data.data)t.haveMission=!1,this.cellList.push(t);this.getMission(),this.getBsc()}else this.errorMsg(e.data.code,this)}).catch(e=>{console.log(e)})},getBsc(){for(var e,t=0,a=this.cellList.length;t<a;t++){e=!1;for(var s=0,i=this.bscList.length;s<i;s++)this.cellList[t].bscID===this.bscList[s].bscID&&(e=!0);if(!e){var l={bscID:this.cellList[t].bscID,bscName:this.cellList[t].bscName};this.bscList.push(l)}}this.getBscTree()},getReciver(){let e=new URLSearchParams,t=this.setAPIPath("/getTakePhotoUser");this.$axios.get(t,e).then(e=>{if(0===e.data.code)for(let t of e.data.data)this.reciverList.push(t)}).catch(e=>{console.log(e)})},countPhotoNum(){this.formInline.takePhotoDirectAngleEnd<this.formInline.takePhotoDirectAngleBegin?this.formInline.takePhotoNum=Math.ceil((this.formInline.takePhotoDirectAngleEnd-this.formInline.takePhotoDirectAngleBegin+360)/this.formInline.takePhotoDirectAngleRotate)+1:360===this.formInline.takePhotoDirectAngleEnd?this.formInline.takePhotoNum=Math.ceil((this.formInline.takePhotoDirectAngleEnd-this.formInline.takePhotoDirectAngleBegin)/this.formInline.takePhotoDirectAngleRotate):this.formInline.takePhotoNum=Math.ceil((this.formInline.takePhotoDirectAngleEnd-this.formInline.takePhotoDirectAngleBegin)/this.formInline.takePhotoDirectAngleRotate)+1},getMissionEdit(){this.formInline=this.getStorage(this.index)},getMissionAbout(){let e=new URLSearchParams,t=this.setAPIPath("/task/"+this.user);this.$axios.get(t,e).then(e=>{0===e.data.code&&(e.data.data[this.index].taskPlanCompleteTime=this.dateFormat(e.data.data[this.index].taskPlanCompleteTime,1),this.formInline=e.data.data[this.index])}).catch(e=>{console.log(e)})},addMission(){let e=new URLSearchParams,t=this.setAPIPath("/task");e.append("taskName",this.formInline.taskName),e.append("bscID",this.formInline.bscIDCellId[1].bscID),e.append("cellID",this.formInline.bscIDCellId[1].cellID),e.append("takePhotoLongitude",parseFloat(this.formInline.takePhotoLongitude)),e.append("takePhotoLatitude",parseFloat(this.formInline.takePhotoLatitude)),e.append("takePhotoAltitude",parseFloat(this.formInline.takePhotoAltitude)),e.append("takePhotoElevationAngle",parseFloat(this.formInline.takePhotoElevationAngle)),e.append("takePhotoDirectAngleBegin",parseFloat(this.formInline.takePhotoDirectAngleBegin)),e.append("takePhotoDirectAngleEnd",parseFloat(this.formInline.takePhotoDirectAngleEnd)),e.append("takePhotoDirectAngleRotate",parseFloat(this.formInline.takePhotoDirectAngleRotate)),e.append("takePhotoNum",parseInt(this.formInline.takePhotoNum)),e.append("taskProducerID",this.getCookie("userID")),e.append("taskProduceTime",parseInt((new Date).getTime()/1e3)),e.append("taskConsumerID",this.formInline.taskConsumerID),e.append("taskPlanCompleteTime",parseInt(this.formInline.taskPlanCompleteTime.getTime()/1e3)),this.$axios.post(t,e).then(e=>{if(0===e.data.code)for(var t in this.openMsg("增加成功！","success",this),this.$emit("toTab"),this.formInline)this.formInline[t]="bscIDCellId"!==t?"":[];else this.errorMsg(e.data.code,this)}).catch(e=>{console.log(e)})},triggerClick(){this.$refs.form1.validate(e=>{if(!e)return!1;this.addMission()})},checkCellListMission(){for(var e of this.cellList)for(var t of this.missionList)e.bscID===t.bscID&&e.cellID===t.cellID&&(e.haveMission=!0)},getMission(){this.missionList.length=0;let e=new URLSearchParams,t=this.setAPIPath("/task/"+this.user);this.$axios.get(t,e).then(e=>{0===e.data.code&&(this.missionList=e.data.data),this.checkCellListMission()}).catch(e=>{console.log(e)})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contain mission inputControl"},[a("el-form",{ref:"form1",staticClass:"formStyle",attrs:{inline:!0,model:e.formInline,rules:e.rules,size:"mini","label-width":"120px"}},[a("el-form-item",{attrs:{label:"小区",prop:"bscIDCellId"}},[a("el-cascader",{attrs:{placeholder:"请选择小区",options:e.options,"change-on-select":""},on:{change:e.change},model:{value:e.formInline.bscIDCellId,callback:function(t){e.$set(e.formInline,"bscIDCellId",t)},expression:"formInline.bscIDCellId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务名称",prop:"taskName"}},[a("el-input",{model:{value:e.formInline.taskName,callback:function(t){e.$set(e.formInline,"taskName",t)},expression:"formInline.taskName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄经度",prop:"takePhotoLongitude"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoLongitude,callback:function(t){e.$set(e.formInline,"takePhotoLongitude",t)},expression:"formInline.takePhotoLongitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄纬度",prop:"takePhotoLatitude"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoLatitude,callback:function(t){e.$set(e.formInline,"takePhotoLatitude",t)},expression:"formInline.takePhotoLatitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"海拔高度",prop:"takePhotoAltitude"}},[a("el-input",{attrs:{placeholder:"单位：米"},model:{value:e.formInline.takePhotoAltitude,callback:function(t){e.$set(e.formInline,"takePhotoAltitude",t)},expression:"formInline.takePhotoAltitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄下倾角",prop:"takePhotoElevationAngle"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoElevationAngle,callback:function(t){e.$set(e.formInline,"takePhotoElevationAngle",t)},expression:"formInline.takePhotoElevationAngle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"方向角",prop:"directAngle"}},[a("el-input",{attrs:{placeholder:"单位：度",disabled:""},model:{value:e.formInline.directAngle,callback:function(t){e.$set(e.formInline,"directAngle",t)},expression:"formInline.directAngle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄方向角起点",prop:"takePhotoDirectAngleBegin"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoDirectAngleBegin,callback:function(t){e.$set(e.formInline,"takePhotoDirectAngleBegin",t)},expression:"formInline.takePhotoDirectAngleBegin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄方向角终点",prop:"takePhotoDirectAngleEnd"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoDirectAngleEnd,callback:function(t){e.$set(e.formInline,"takePhotoDirectAngleEnd",t)},expression:"formInline.takePhotoDirectAngleEnd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄偏移角",prop:"takePhotoDirectAngleRotate"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoDirectAngleRotate,callback:function(t){e.$set(e.formInline,"takePhotoDirectAngleRotate",t)},expression:"formInline.takePhotoDirectAngleRotate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄图片数",prop:"takePhotoNum"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formInline.takePhotoNum,callback:function(t){e.$set(e.formInline,"takePhotoNum",t)},expression:"formInline.takePhotoNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接收人",prop:"taskConsumerID"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.taskConsumerID,callback:function(t){e.$set(e.formInline,"taskConsumerID",t)},expression:"formInline.taskConsumerID"}},e._l(e.reciverList,function(e){return a("el-option",{key:e.userID,attrs:{label:e.userID,value:e.userID}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"计划完成日期",prop:"taskPlanCompleteTime"}},[e.flag?e._e():a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formInline.taskPlanCompleteTime,callback:function(t){e.$set(e.formInline,"taskPlanCompleteTime",t)},expression:"formInline.taskPlanCompleteTime"}}),e._v(" "),e.flag?a("el-input",{model:{value:e.formInline.taskPlanCompleteTime,callback:function(t){e.$set(e.formInline,"taskPlanCompleteTime",t)},expression:"formInline.taskPlanCompleteTime"}}):e._e()],1)],1),e._v(" "),a("div",{staticClass:"enquierBut"},[a("el-button",{attrs:{size:"small"},on:{click:e.clear}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.triggerClick}},[e._v("提交")])],1),e._v(" "),e.isOpenMap?a("div",{staticStyle:{border:"solid lightblue 1px",height:"100%",marginTop:"10px"}},[a("el-amap",{attrs:{vid:"amapCameraMission",events:e.mapEvents,center:e.center,zoom:e.zoom}},[a("el-amap-marker",{attrs:{position:e.positionMission}})],1)],1):e._e()],1)},staticRenderFns:[]};var w=a("VU/8")(P,_,!1,function(e){a("BGDE"),a("CjTb")},"data-v-21387773",null).exports,L={data(){var e=(e,t,a)=>{isNaN(this.formInline[e.fullField])?a(new Error("只能填数字！")):parseFloat(this.formInline[e.fullField])<0?a(new Error("不能小于0！")):(this.formInline[e.fullField]=parseFloat(this.formInline[e.fullField]),a())};return{buttonMsg:{msg:"编辑",disabled:!1},missionNameList:[],taskIDList:[],bscIDList:[],cellIDList:[],publisherList:[],missionList:[{taskID:"1",taskName:"假数据",bscID:"1",cellID:"1",takePhotoLongitude:113.248,takePhotoLatitude:22.364,takePhotoAltitude:20,takePhotoElevationAngle:60,takePhotoDirectAngleBegin:0,takePhotoDirectAngleEnd:120,takePhotoDirectAngleRotate:15,takePhotoNum:8,taskProducerID:"cai",taskProduceTime:1547430927,taskPublishTime:0,taskConsumerID:"cai",taskStatus:"创建"}],reciverList:[],position:[113.58811,22.23263],center:[],currentList:{},user:"",userType:"",disable:!1,showPanel:!1,dialogTableVisible:!1,result:!1,checkForm:[],formInline:{taskName:"",bscID:"",cellID:"",takePhotoLongitude:"",takePhotoLatitude:"",takePhotoAltitude:"",takePhotoElevationAngle:"",takePhotoDirectAngleBegin:"",takePhotoDirectAngleEnd:"",takePhotoDirectAngleRotate:"",takePhotoNum:"",taskProducerID:"",taskProduceTime:"",taskConsumerID:"",taskPlanCompleteTime:""},formList:["form1","form2","form3","form4","form5","form6"],rules:{taskName:[{required:!0,message:"不能为空！",trigger:"blur"}],takePhotoLongitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoLatitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoDirectAngleBegin:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoDirectAngleEnd:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:(e,t,a)=>{isNaN(this.formInline[e.fullField])?a(new Error("只能填数字！")):parseFloat(this.formInline[e.fullField])<=parseFloat(this.formInline.takePhotoDirectAngleBegin)?a(new Error("要比方向角起点大！")):parseFloat(this.formInline[e.fullField])<0?a(new Error("不能小于0！")):(this.formInline[e.fullField]=parseFloat(this.formInline[e.fullField]),a())},trigger:"blur"}],takePhotoDirectAngleRotate:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoAltitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoElevationAngle:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],taskConsumerID:[{required:!0,message:"不能为空！",trigger:"blur"}],taskPlanCompleteTime:[{required:!0,message:"不能为空！",trigger:"blur"}]},mapEvents:{click:e=>{let t=this.gcjToWgsExactly(e.lnglat.lat,e.lnglat.lng),a=t.lon,s=t.lat;this.formInline.takePhotoLongitude=Math.ceil(1e5*a)/1e5,this.formInline.takePhotoLatitude=Math.ceil(1e5*s)/1e5,this.position=[e.lnglat.lng,e.lnglat.lat]}}}},created(){this.user=this.getCookie("userID"),this.userType=this.getCookie("userType"),this.getMission(),this.getReciver(),this.center=this.position},computed:{disabledFun:()=>(function(e){if("0"===this.userType){if("创建"!==e.taskStatus&&"完成"!==e.taskStatus)return{disable:!0,msg:"进行中"};return{disable:!1,msg:"完成"===e.taskStatus?"重拍":"编辑"}}return"创建"!==e.taskStatus&&"完成"!==e.taskStatus?{disable:!0,msg:"进行中"}:("",{disable:!0,msg:"完成"===e.taskStatus?"完成":"编辑"})})},methods:{getReciver(){let e=new URLSearchParams,t=this.setAPIPath("/getTakePhotoUser");this.$axios.get(t,e).then(e=>{if(0===e.data.code)for(let t of e.data.data)this.reciverList.push(t)}).catch(e=>{console.log(e)})},handleEdit(e,t){"完成"!==t.taskStatus?this.getCell(e,t,t.bscID,t.cellID):this.alertMess(e,t,1)},alertMess(e,t,a){switch(a){case 1:this.$confirm("确定要重拍该任务?点击确定后将清除所有以上传的图片，请谨慎操作！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.redoTask(e,t)}).catch(()=>{this.openMsg("取消重拍！","",this)});break;case 2:this.$confirm("确定要发布该任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.handlePublic(e,t)}).catch(()=>{this.openMsg("取消发布！","",this)});break;case 3:this.$confirm("此操作将永久删除该任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.handleDelete(e,t)}).catch(()=>{this.openMsg("取消删除！","",this)})}},redoTask(e,t){let a=new URLSearchParams,s=this.setAPIPath("/redoTask/"+t.taskID);this.$axios.put(s,a).then(e=>{0===e.data.code&&(this.getMission(),this.openMsg("任务已重置！","success",this))}).catch(e=>{console.log(e)})},handleDelete(e,t){let a=new URLSearchParams,s=this.setAPIPath("/task/"+t.taskID);this.$axios.delete(s,a).then(e=>{0===e.data.code&&(this.getMission(),this.openMsg("删除成功！","success",this))}).catch(e=>{console.log(e)})},handlePublic(e,t){let a=new URLSearchParams,s=this.setAPIPath("/publishTask/"+t.taskID);this.$axios.put(s,a).then(e=>{0===e.data.code&&(this.getMission(),this.openMsg("发布成功！","success",this))}).catch(e=>{console.log(e)})},getCell(e,t,a,s){let i=new URLSearchParams,l=this.setAPIPath("/cell");this.$axios.get(l,i).then(i=>{if(0===i.data.code)for(let l of i.data.data)l.bscID===a&&l.cellID===s&&this.$emit("show",e,t,l.directAngle);else this.errorMsg(i.data.code,this)}).catch(e=>{console.log(e)})},getMission(){this.missionList.length=0;let e=new URLSearchParams,t=this.setAPIPath("/task/"+this.user);this.$axios.get(t,e).then(e=>{if(0===e.data.code){for(var t=0;t<e.data.data.length;t++){var a=e.data.data[t],s="";switch(a.taskStatus){case 0:s="创建";break;case 1:s="发布";break;case 2:s="拍摄";break;case 3:s="上传";break;case 4:s="完成";break;default:s=""}a.taskPublishTime=this.dateFormat(a.taskPublishTime),a.taskPlanCompleteTime=this.dateFormat(a.taskPlanCompleteTime,1),a.taskProduceTime=this.dateFormat(a.taskProduceTime),a.taskFactCompleteTime=this.dateFormat(a.taskFactCompleteTime),a.taskStatus=s,"创建"!==a.taskStatus?a.showBotton="已发布":a.showBotton="发布",this.missionList.push(e.data.data[t])}this.setList(this.missionNameList,"taskName"),this.setList(this.taskIDList,"taskID"),this.setList(this.cellIDList,"cellID"),this.setList(this.bscIDList,"bscID"),this.setList(this.publisherList,"taskProducerID")}}).catch(e=>{console.log(e)})},setList(e,t){for(let i of this.missionList){var a=!1,s={text:i[t],value:i[t]};if(e){for(let s of e)s.text===i[t]&&(a=!0);a||e.push(s)}else e.push(s)}parseInt(e[0].text)>0&&(e=e.sort(this.compare("text")))},compare:e=>(function(t,a){return parseInt(t[e])-parseInt(a[e])}),filterHandler:(e,t,a)=>t[a.property]===e,triggerClick(){for(var e=0;e<this.formList.length;e++)this.checkForm[e]=!0;for(e=0;e<this.formList.length;e++)this.checkRule(this.formList[e],e);if(this.checkForm.forEach(e=>{this.result=this.result||e}),this.result)for(var t=0;t<this.formList.length;t++)this.checkForm[t]=!0;else{var a=!1;for(var s in this.currentList)this.currentList[s]!==this.formInline[s]&&(a=!0);a?this.changeMission():this.openMsg("请修改后再提交！","error",this)}this.result=!1},checkRule(e,t){this.$refs[e].validate(e=>{if(!e)return!1;this.checkForm[t]=!1})},changeMission(){let e=new URLSearchParams,t=this.setAPIPath("/task");e.append("taskID",this.formInline.taskID),e.append("taskName",this.formInline.taskName),e.append("bscID",this.formInline.bscID),e.append("cellID",this.formInline.cellID),e.append("takePhotoLongitude",this.formInline.takePhotoLongitude),e.append("takePhotoLatitude",this.formInline.takePhotoLatitude),e.append("takePhotoAltitude",this.formInline.takePhotoAltitude),e.append("takePhotoElevationAngle",this.formInline.takePhotoElevationAngle),e.append("takePhotoDirectAngleBegin",this.formInline.takePhotoDirectAngleBegin),e.append("takePhotoDirectAngleEnd",this.formInline.takePhotoDirectAngleEnd),e.append("takePhotoDirectAngleRotate",this.formInline.takePhotoDirectAngleRotate),e.append("takePhotoNum",this.formInline.takePhotoNum),e.append("taskConsumerID",this.formInline.taskConsumerID),e.append("taskPlanCompleteTime",parseInt(new Date(this.formInline.taskPlanCompleteTime.replace(/-/g,"/")).getTime()/1e3)),this.$axios.put(t,e).then(e=>{0===e.data.code?(this.openMsg("修改成功！","success",this),this.dialogTableVisible=!1):this.errorMsg(e.data.code,this)}).catch(e=>{console.log(e)})},clear(){for(var e in this.currentList)this.formInline[e]=this.currentList[e];let t=this.wgsToGcj(this.formInline.takePhotoLatitude,this.formInline.takePhotoLongitude),a=t.lon,s=t.lat;this.position=[a,s],this.center=this.position}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"enResult"},[a("el-table",{attrs:{data:e.missionList,"header-row-style":{"background-color":"#007AFF",color:"white","font-size":"16px"},"header-cell-style":{"background-color":"#007AFF",color:"white","font-size":"14px"}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{inline:""}},[a("el-form-item",{attrs:{label:"拍摄经度："}},[a("span",[e._v(e._s(t.row.takePhotoLongitude))])]),e._v(" "),a("el-form-item",{attrs:{label:"拍摄纬度："}},[a("span",[e._v(e._s(t.row.takePhotoLatitude))])]),e._v(" "),a("el-form-item",{attrs:{label:"海拔高度："}},[a("span",[e._v(e._s(t.row.takePhotoAltitude))])]),e._v(" "),a("el-form-item",{attrs:{label:"拍摄下倾角："}},[a("span",[e._v(e._s(t.row.takePhotoElevationAngle))])]),e._v(" "),a("el-form-item",{attrs:{label:"方向角起点："}},[a("span",[e._v(e._s(t.row.takePhotoDirectAngleBegin))])]),e._v(" "),a("el-form-item",{attrs:{label:"方向角终点："}},[a("span",[e._v(e._s(t.row.takePhotoDirectAngleEnd))])]),e._v(" "),a("el-form-item",{attrs:{label:"拍摄偏移角："}},[a("span",[e._v(e._s(t.row.takePhotoDirectAngleRotate))])]),e._v(" "),a("el-form-item",{attrs:{label:"拍摄图片数："}},[a("span",[e._v(e._s(t.row.takePhotoNum))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建者："}},[a("span",[e._v(e._s(t.row.taskProducerID))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间："}},[a("span",[e._v(e._s(t.row.taskProduceTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"任务状态："}},[a("span",[e._v(e._s(t.row.taskStatus))])]),e._v(" "),"完成"===t.row.taskStatus?a("el-form-item",{attrs:{label:"实际完成日期："}},[a("span",[e._v(e._s(t.row.taskFactCompleteTime))])]):e._e()],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"taskName",label:"任务名称","header-align":"center",align:"center",filters:e.missionNameList,"filter-method":e.filterHandler}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskID",label:"任务ID","header-align":"center",align:"center",filters:e.taskIDList,"filter-method":e.filterHandler}}),e._v(" "),a("el-table-column",{attrs:{prop:"bscID",label:"基站ID","header-align":"center",align:"center",filters:e.bscIDList,"filter-method":e.filterHandler}}),e._v(" "),a("el-table-column",{attrs:{prop:"cellID",label:"小区ID","header-align":"center",align:"center",filters:e.cellIDList,"filter-method":e.filterHandler}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskProducerID",label:"发布人","header-align":"center",align:"center",filters:e.publisherList,"filter-method":e.filterHandler}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskConsumerID",label:"接收人","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskPublishTime",label:"发布日期","header-align":"center",align:"center",width:"148"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskPlanCompleteTime",label:"计划完成日期","header-align":"center",align:"center",width:"148"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskStatus",label:"状态","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",width:"230",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.disabledFun(t.row).disable},on:{click:function(a){e.handleEdit(t.$index,t.row,1)}}},[e._v(e._s(e.disabledFun(t.row).msg))]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:"创建"!==t.row.taskStatus||"2"===e.userType},on:{click:function(a){e.alertMess(t.$index,t.row,2)}}},[e._v(e._s(t.row.showBotton))]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",disabled:"2"===e.userType},on:{click:function(a){e.alertMess(t.$index,t.row,3)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var y=a("VU/8")(L,D,!1,function(e){a("rryo")},null,null).exports,A={data(){var e=(e,t,a)=>{isNaN(this.formInline[e.fullField])?a(new Error("只能填数字！")):parseFloat(this.formInline[e.fullField])<0?a(new Error("不能小于0！")):(this.formInline[e.fullField]=parseFloat(this.formInline[e.fullField]),a())};return{missionList:{cellName:"",num:"",missionName:"",missionNum:"",cellId:"",cellLongit:"",downtilt:"",celldimen:"",angle:"",height:"",devAngle:"",number:"",reciver:"",finish:""},activeName:"missionList",editLabelName:"",NewMissionLabelName:"新增任务",searchInput:"",showPanel:!0,missionNameList:[],taskIDList:[],cellIDList:[],publisherList:[],reciverList:[],position:[113.564221,22.370364],center:[],zoom:16,currentList:{},user:"",openMap:!0,dialogTableVisible:!1,checkForm:[],userType:"",formInline:{taskName:"",bscID:"",cellID:"",bscIDCellID:"",taskID:"",takePhotoLongitude:"",takePhotoLatitude:"",takePhotoAltitude:"",takePhotoElevationAngle:"",takePhotoDirectAngleBegin:"",takePhotoDirectAngleEnd:"",takePhotoDirectAngleRotate:"",takePhotoNum:"",taskProducerID:"",taskProduceTime:"",taskConsumerID:"",taskPlanCompleteTime:"",directAngle:""},rules:{taskName:[{required:!0,message:"不能为空！",trigger:"blur"}],takePhotoLongitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoLatitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoDirectAngleBegin:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoDirectAngleEnd:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:(e,t,a)=>{isNaN(this.formInline[e.fullField])?a(new Error("只能填数字！")):parseFloat(this.formInline[e.fullField])<=parseFloat(this.formInline.takePhotoDirectAngleBegin)?a(new Error("要比方向角起点大！")):parseFloat(this.formInline[e.fullField])<0?a(new Error("不能小于0！")):(this.formInline[e.fullField]=parseFloat(this.formInline[e.fullField]),a())},trigger:"blur"}],takePhotoDirectAngleRotate:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoAltitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],takePhotoElevationAngle:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],taskConsumerID:[{required:!0,message:"不能为空！",trigger:"blur"}],taskPlanCompleteTime:[{required:!0,message:"不能为空！",trigger:"blur"}]},mapEvents:{click:e=>{let t=this.gcjToWgsExactly(e.lnglat.lat,e.lnglat.lng),a=t.lon,s=t.lat;this.formInline.takePhotoLongitude=Math.ceil(1e5*a)/1e5,this.formInline.takePhotoLatitude=Math.ceil(1e5*s)/1e5,this.position=[e.lnglat.lng,e.lnglat.lat]}}}},created(){this.getReciver(),this.center=this.position,this.userType=this.getCookie("userType"),"2"===this.userType&&(this.NewMissionLabelName="")},watch:{AngleEnd(e,t){this.countPhotoNum()},AngleBegin(e,t){this.countPhotoNum()},AngleRotate(e,t){this.countPhotoNum()},takePhotoLongitude(e,t){if(e){let t=this.wgsToGcj(this.takePhotoLatitude,e),a=t.lon,s=t.lat;this.position=[a,s]}},takePhotoLatitude(e,t){if(e){let t=this.wgsToGcj(e,this.takePhotoLongitude),a=t.lon,s=t.lat;this.position=[a,s]}}},computed:{AngleEnd(){return this.formInline.takePhotoDirectAngleEnd},AngleBegin(){return this.formInline.takePhotoDirectAngleBegin},AngleRotate(){return this.formInline.takePhotoDirectAngleRotate},takePhotoLongitude(){return this.formInline.takePhotoLongitude},takePhotoLatitude(){return this.formInline.takePhotoLatitude}},methods:{toResultTab(){this.activeName="missionList",this.$refs.missionResult.getMission()},countPhotoNum(){this.formInline.takePhotoDirectAngleEnd<this.formInline.takePhotoDirectAngleBegin?this.formInline.takePhotoNum=Math.ceil((this.formInline.takePhotoDirectAngleEnd-this.formInline.takePhotoDirectAngleBegin+360)/this.formInline.takePhotoDirectAngleRotate)+1:360===this.formInline.takePhotoDirectAngleEnd?this.formInline.takePhotoNum=Math.ceil((this.formInline.takePhotoDirectAngleEnd-this.formInline.takePhotoDirectAngleBegin)/this.formInline.takePhotoDirectAngleRotate):this.formInline.takePhotoNum=Math.ceil((this.formInline.takePhotoDirectAngleEnd-this.formInline.takePhotoDirectAngleBegin)/this.formInline.takePhotoDirectAngleRotate)+1},getReciver(){this.reciverList.length=0;let e=new URLSearchParams,t=this.setAPIPath("/getTakePhotoUser");this.$axios.get(t,e).then(e=>{if(0===e.data.code)for(let t of e.data.data)this.reciverList.push(t)}).catch(e=>{console.log(e)})},handleClick(e,t){"missionList"===e.name&&this.$refs.missionResult.getMission(),"editMission"!==e.name&&(this.showPanel=!0,this.editLabelName="")},show(e,t,a){for(var s in this.showPanel=!1,this.editLabelName="编辑任务",this.activeName="editMission",this.formInline)this.formInline[s]=t[s],this.currentList[s]=t[s];this.formInline.bscIDCellID=t.bscID+"/"+t.cellID,this.formInline.directAngle=a;let i=this.wgsToGcj(this.formInline.takePhotoLatitude,this.formInline.takePhotoLongitude),l=i.lon,r=i.lat;this.position=[l,r],this.center=this.position},removeTab(){this.showPanel=!0,this.editLabelName="",this.activeName="missionList"},triggerClick(){this.$refs.form1.validate(e=>{if(!e)return!1;var t=!1;for(var a in this.currentList)this.currentList[a]!==this.formInline[a]&&(t=!0);t?this.changeMission():this.openMsg("请修改后再提交！","error",this)})},checkRule(e,t){this.$refs[e].validate(e=>{if(!e)return!1;this.checkForm[t]=!1})},changeMission(){let e=new URLSearchParams,t=this.setAPIPath("/task");e.append("taskID",this.formInline.taskID),e.append("taskName",this.formInline.taskName),e.append("bscID",this.formInline.bscID),e.append("cellID",this.formInline.cellID),e.append("takePhotoLongitude",parseFloat(this.formInline.takePhotoLongitude)),e.append("takePhotoLatitude",parseFloat(this.formInline.takePhotoLatitude)),e.append("takePhotoAltitude",this.formInline.takePhotoAltitude),e.append("takePhotoElevationAngle",this.formInline.takePhotoElevationAngle),e.append("takePhotoDirectAngleBegin",this.formInline.takePhotoDirectAngleBegin),e.append("takePhotoDirectAngleEnd",this.formInline.takePhotoDirectAngleEnd),e.append("takePhotoDirectAngleRotate",this.formInline.takePhotoDirectAngleRotate),e.append("takePhotoNum",this.formInline.takePhotoNum),e.append("taskConsumerID",this.formInline.taskConsumerID),e.append("taskPlanCompleteTime",parseInt(new Date(this.formInline.taskPlanCompleteTime.replace(/-/g,"/")).getTime()/1e3)),this.$axios.put(t,e).then(e=>{0===e.data.code?(this.openMsg("修改成功！","success",this),this.removeTab()):this.errorMsg(e.data.code,this)}).catch(e=>{console.log(e)})},clear(){for(var e in this.currentList)this.formInline[e]=this.currentList[e];let t=this.wgsToGcj(this.formInline.takePhotoLatitude,this.formInline.takePhotoLongitude),a=t.lon,s=t.lat;this.position=[a,s],this.center=this.position}},components:{mission:w,enquierResult:y}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container missionDetail"},[a("div",{staticClass:"TopTitle"},[e._v("任务管理")]),e._v(" "),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick,"tab-remove":e.removeTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"任务列表",name:"missionList"}},[a("el-form",{staticClass:"formWidth",attrs:{inline:!0,model:e.missionList,size:"mini","label-width":"90px"}},[a("enquierResult",{ref:"missionResult",on:{show:e.show}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.NewMissionLabelName,name:"addMission",disabled:"2"===e.userType}},[a("mission",{on:{toTab:e.toResultTab}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.editLabelName,name:"editMission",disabled:e.showPanel}},[a("div",{staticClass:"editContain contain"},[a("el-form",{staticClass:"formStyle",attrs:{inline:!0,model:e.formInline,size:"mini","label-width":"120px"}},[a("el-form-item",{attrs:{label:"基站ID/小区ID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formInline.bscIDCellID,callback:function(t){e.$set(e.formInline,"bscIDCellID",t)},expression:"formInline.bscIDCellID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务ID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formInline.taskID,callback:function(t){e.$set(e.formInline,"taskID",t)},expression:"formInline.taskID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务名称",prop:"taskName"}},[a("el-input",{model:{value:e.formInline.taskName,callback:function(t){e.$set(e.formInline,"taskName",t)},expression:"formInline.taskName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄经度",prop:"takePhotoLongitude"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoLongitude,callback:function(t){e.$set(e.formInline,"takePhotoLongitude",t)},expression:"formInline.takePhotoLongitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄纬度",prop:"takePhotoLatitude"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoLatitude,callback:function(t){e.$set(e.formInline,"takePhotoLatitude",t)},expression:"formInline.takePhotoLatitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"海拔高度",prop:"takePhotoAltitude"}},[a("el-input",{attrs:{placeholder:"单位：米"},model:{value:e.formInline.takePhotoAltitude,callback:function(t){e.$set(e.formInline,"takePhotoAltitude",t)},expression:"formInline.takePhotoAltitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"方向角",prop:"directAngle"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formInline.directAngle,callback:function(t){e.$set(e.formInline,"directAngle",t)},expression:"formInline.directAngle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄下倾角",prop:"takePhotoElevationAngle"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoElevationAngle,callback:function(t){e.$set(e.formInline,"takePhotoElevationAngle",t)},expression:"formInline.takePhotoElevationAngle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄方向角起点",prop:"takePhotoDirectAngleBegin"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoDirectAngleBegin,callback:function(t){e.$set(e.formInline,"takePhotoDirectAngleBegin",t)},expression:"formInline.takePhotoDirectAngleBegin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄方向角终点",prop:"takePhotoDirectAngleEnd"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoDirectAngleEnd,callback:function(t){e.$set(e.formInline,"takePhotoDirectAngleEnd",t)},expression:"formInline.takePhotoDirectAngleEnd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄偏移角",prop:"takePhotoDirectAngleRotate"}},[a("el-input",{attrs:{placeholder:"单位：度"},model:{value:e.formInline.takePhotoDirectAngleRotate,callback:function(t){e.$set(e.formInline,"takePhotoDirectAngleRotate",t)},expression:"formInline.takePhotoDirectAngleRotate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拍摄图片数",prop:"takePhotoNum"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formInline.takePhotoNum,callback:function(t){e.$set(e.formInline,"takePhotoNum",t)},expression:"formInline.takePhotoNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接收人",prop:"taskConsumerID"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.taskConsumerID,callback:function(t){e.$set(e.formInline,"taskConsumerID",t)},expression:"formInline.taskConsumerID"}},e._l(e.reciverList,function(e){return a("el-option",{key:e.userID,attrs:{label:e.userID,value:e.userID}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"计划完成日期",prop:"taskPlanCompleteTime"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formInline.taskPlanCompleteTime,callback:function(t){e.$set(e.formInline,"taskPlanCompleteTime",t)},expression:"formInline.taskPlanCompleteTime"}})],1)],1),e._v(" "),a("div",{staticClass:"footerBtn",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.clear}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.triggerClick}},[e._v("提交")])],1)],1),e._v(" "),a("div",{staticClass:"editMap"},[e.openMap?a("div",{staticStyle:{border:"solid lightblue 1px",height:"100%",marginTop:"10px"}},[a("el-amap",{attrs:{vid:"amapCamera",events:e.mapEvents,center:e.center,zoom:e.zoom}},[a("el-amap-marker",{attrs:{position:e.position}})],1)],1):e._e()])])],1)],1)},staticRenderFns:[]};var T=a("VU/8")(A,x,!1,function(e){a("XI1a"),a("5HrG")},"data-v-22ca487a",null).exports,N={data:function(){return{cellList:[],bscList:[],cellTree:[{id:1,label:"珠海移动",children:[]}],defaultProps:{children:"children",label:"label"}}},created:function(){this.getCell()},methods:{handleNodeClick:function(e){this.$emit("selectCell",e.cell)},getCell:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/cell");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;e.cellList.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}e.getBsc(),e.getBscTree()}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},getBsc:function(){for(var e,t=0,a=this.cellList.length;t<a;t++){e=!1;for(var s=0,i=this.bscList.length;s<i;s++)this.cellList[t].bscID===this.bscList[s].bscID&&(e=!0);if(!e){var l={bscID:this.cellList[t].bscID,bscName:this.cellList[t].bscName};this.bscList.push(l)}}},getBscTree:function(){this.id=this.cellTree[0].id;for(var e=0,t=this.bscList.length;e<t;e++){var a={};a.id=++this.id,a.label=this.bscList[e].bscName,a.children=this.getCellTree(this.bscList[e].bscID),this.cellTree[0].children.push(a)}},getCellTree:function(e){for(var t=[],a=0,s=this.cellList.length;a<s;a++){var i={id:0,label:"",children:[],cell:{}};this.cellList[a].bscID===e&&(i.id=++this.id,i.label=this.cellList[a].cellName,i.cell=this.cellList[a],t.push(i))}return t}}},R={render:function(){var e=this.$createElement;return(this._self._c||e)("el-tree",{attrs:{data:this.cellTree,props:this.defaultProps,"node-key":"id","default-expanded-keys":[1,2],"aria-hidden":"true"},on:{"node-click":this.handleNodeClick}})},staticRenderFns:[]},F=a("VU/8")(N,R,!1,null,null,null).exports,S={render:function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"fade"}},[t("div",{staticClass:"img-view",on:{click:this.bigImg}},[t("div",{staticClass:"img-layer"}),this._v(" "),t("div",{staticClass:"img"},[t("img",{attrs:{src:this.imgSrc}})])])])},staticRenderFns:[]};var M=a("VU/8")({props:["imgSrc"],methods:{bigImg:function(){this.$emit("clickit")}}},S,!1,function(e){a("0knf")},"data-v-246720ec",null).exports,E={data:function(){var e=this;return{ruleForm:{longitude:0,latitude:0},stitchingStatus:-1,showImg:!1,imgSrc:"",isOpenMap:!0,position:[113.58811,22.23263],center:[],cellObj:{},cellCss:{"padding-bottom":"0px","padding-top":"0px"},headerStyle:{"background-color":"#007AFF",color:"white"},mapEvents:{click:function(t){var a=e.gcjToWgsExactly(t.lnglat.lat,t.lnglat.lng),s=a.lon,i=a.lat;e.ruleForm.longitude=Math.ceil(1e5*s)/1e5,e.ruleForm.latitude=Math.ceil(1e5*i)/1e5,e.position=[t.lnglat.lng,t.lnglat.lat]}},user:"",showList:[],sceneList:[{name:"学校",value:"",present:0},{name:"停车场",value:"",present:0}],projList:[{name:"建筑",value:"",present:0},{name:"人行道",value:"",present:0}],distentList:[{name:"",section:[]}],showImgList:[],showImgNum:5,clickRightTime:1,recognizeResult:[],bscID:"",cellID:"",current:0,imgStar:0,currenImg:{},missionList:{bscID:"",cellID:"",cellName:"",lac:"",longitude:"",latitude:"",altitude:"",elevationAngle:"",directAngle:"",coverAngleBegin:"",coverAngleEnd:"",coverDistance:""},imgList:[]}},components:{cellTree:F,BigImg:M},created:function(){this.center=this.position,this.user=this.getCookie("userID"),this.setShowList()},methods:{clickImg:function(e){this.showImg=!0,console.log(65341541),this.imgSrc=e.currentTarget.src},viewImg:function(){this.showImg=!1},selectCell:function(e){this.imgStar=0,this.cellObj=e;var t=this.wgsToGcj(e.latitude,e.longitude),a=t.lon,s=t.lat;this.position=[a,s],this.center=this.position,this.bscID=e.bscID,this.cellID=e.cellID,this.missionList=e,this.getResult(),this.setShowList()},getTaskID:function(e){var t=this,a=new URLSearchParams,s=this.setAPIPath("/task/"+this.user);this.$axios.get(s,a).then(function(a){if(0===a.data.code)for(var s in a.data.data)a.data.data[s].cellID===e&&t.getImg(a.data.data[s].taskID)}).catch(function(e){console.log(e)})},getImg:function(e){var t=this,a=new URLSearchParams,s=this.setAPIPath("/getRawPicList/"+e);this.$axios.get(s,a).then(function(e){0===e.data.code||t.errorMsg(e.data.code,t)}).catch(function(e){console.log(e)})},getResult:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/recognition/"+this.bscID+"/"+this.cellID);this.showImgList.length=0;var s={};this.$axios.get(a,t).then(function(t){if(0===t.data.code){e.imgList.length=0;var a=!0,i=!1,l=void 0;try{for(var r,n=p()(t.data.data);!(a=(r=n.next()).done);a=!0){var o=r.value;1!==o.isStitchingPic?e.imgList.push(o):s=o}}catch(e){i=!0,l=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw l}}e.imgList.push(s);var c=!0,u=!1,d=void 0;try{for(var h,m=p()(e.imgList);!(c=(h=m.next()).done);c=!0){var g=h.value;g.fileUrl=e.setAPIPath(g.fileUrl)}}catch(e){u=!0,d=e}finally{try{!c&&m.return&&m.return()}finally{if(u)throw d}}if(e.setShowImgList(0,e.showImgNum),e.clickRightTime=1,e.currenImg=e.showImgList[0],e.current=0,e.sceneList.length=0,e.projList.length=0,e.distentList.length=0,1===e.currenImg.isStitchingPic){e.sceneList.push({name:"是否合成图",present:"是",value:"是"})}else{e.sceneList.push({name:"是否合成图",present:"否",value:"否"})}var f=!0,v=!1,b=void 0;try{for(var I,k=p()(e.currenImg.recognizeScenes);!(f=(I=k.next()).done);f=!0){var C=I.value;e.setSceneList(C.yidongSceneName,C.confidence,C.isStitchingPic)}}catch(e){v=!0,b=e}finally{try{!f&&k.return&&k.return()}finally{if(v)throw b}}var P=!0,_=!1,w=void 0;try{for(var L,D=p()(e.currenImg.recognizeObjects);!(P=(L=D.next()).done);P=!0){var y=L.value;e.setProjList(y.basicObjectName,y.rate)}}catch(e){_=!0,w=e}finally{try{!P&&D.return&&D.return()}finally{if(_)throw w}}var A=!0,x=!1,T=void 0;try{for(var N,R=p()(e.currenImg.obscureObjects);!(A=(N=R.next()).done);A=!0){var F=N.value;e.setDistentList(F.obscureObjectName,F.depthRatePairs)}}catch(e){x=!0,T=e}finally{try{!A&&R.return&&R.return()}finally{if(x)throw T}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},setShowList:function(){for(var e in this.showList=[],this.missionList){var t=this.missionList[e];switch(e){case"altitude":e="海拔高度";break;case"bscID":e="基站ID";break;case"bscName":e="基站名称";break;case"cellID":e="小区ID";break;case"cellName":e="小区名";break;case"coverDistance":e="覆盖距离";break;case"directAngle":e="方向角";break;case"elevationAngle":e="下倾角";break;case"lac":e="小区lac";break;case"latitude":e="纬度";break;case"longitude":e="经度"}if("coverAngleBegin"!==e&&"coverAngleEnd"!==e){var a={name:e,value:t};this.showList.push(a)}}},trigerClick:function(e){if(this.current=e,this.currenImg=this.showImgList[e],this.sceneList.length=0,this.projList.length=0,this.distentList.length=0,this.stitchingStatus=this.currenImg.stitchingStatus,1===this.currenImg.isStitchingPic){this.sceneList.push({name:"是否合成图",present:"是",value:"是"})}else{this.sceneList.push({name:"是否合成图",present:"否",value:"否"})}var t=!0,a=!1,s=void 0;try{for(var i,l=p()(this.currenImg.recognizeScenes);!(t=(i=l.next()).done);t=!0){var r=i.value;this.setSceneList(r.yidongSceneName,r.confidence)}}catch(e){a=!0,s=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw s}}var n=!0,o=!1,c=void 0;try{for(var u,d=p()(this.currenImg.recognizeObjects);!(n=(u=d.next()).done);n=!0){var h=u.value;this.setProjList(h.basicObjectName,h.rate)}}catch(e){o=!0,c=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw c}}var m=!0,g=!1,f=void 0;try{for(var v,b=p()(this.currenImg.obscureObjects);!(m=(v=b.next()).done);m=!0){var I=v.value;this.setDistentList(I.obscureObjectName,I.depthRatePairs)}}catch(e){g=!0,f=e}finally{try{!m&&b.return&&b.return()}finally{if(g)throw f}}},setSceneList:function(e,t){var a=parseInt(100*t),s={name:e,value:Math.round(1e4*t)/1e4,present:a};this.sceneList.push(s)},setProjList:function(e,t){var a=parseInt(100*t),s={name:e,value:Math.round(1e4*t)/1e4,present:a};this.projList.push(s)},setDistentList:function(e,t){var a=e,s=[],i=!0,l=!1,r=void 0;try{for(var n,o=p()(t);!(i=(n=o.next()).done);i=!0){var c=n.value,u=parseInt(100*c.rate),d="";switch(c.depthRegionIdx){case 0:d="0-50m:";break;case 1:d="50-100m:";break;case 2:d="100-300m:";break;case 3:d="大于300m:"}var h={value:u,distent:d};s.push(h)}}catch(e){l=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(l)throw r}}var m={name:a,section:s};this.distentList.push(m)},trigerRightClick:function(){if(this.imgStar<this.imgList.length-1){this.imgStar++;var e=this.imgStar+this.showImgNum;this.setShowImgList(this.imgStar,e)}else this.openMsg("已无更多图片!","",this)},trigerLeftClick:function(){if(this.imgStar>0){this.imgStar--;var e=this.imgStar+this.showImgNum;this.setShowImgList(this.imgStar,e)}else this.openMsg("已无更多图片!","",this)},setShowImgList:function(e,t){if(this.current=-1,this.showImgList.length=0,t<this.imgList.length)for(var a=e;a<t;a++)this.showImgList.push(this.imgList[a]);else for(var s=e,i=this.imgList.length;s<i;s++)this.showImgList.push(this.imgList[s])}}},U={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",staticStyle:{"min-height":"783px"}},[s("div",{staticClass:"TopTitle"},[e._v("场景识别")]),e._v(" "),s("div",{staticClass:"mapTop"},[s("div",{staticClass:"celltree"},[s("cellTree",{on:{selectCell:e.selectCell}})],1),e._v(" "),s("div",{staticClass:"map"},[e.isOpenMap?s("div",{staticStyle:{border:"solid lightblue 1px",height:"100%","min-height":"568px"}},[s("el-amap",{attrs:{vid:"amapCamera",events:e.mapEvents,center:e.center}},[s("el-amap-marker",{attrs:{position:e.position}})],1)],1):e._e()]),e._v(" "),s("div",{staticClass:"detailMsg"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.showList,"header-row-style":e.headerStyle,"cell-style":e.cellCss,size:"mini"}},[s("el-table-column",{attrs:{prop:"name",label:"项目",width:"90"}}),e._v(" "),s("el-table-column",{attrs:{prop:"value",label:"值",width:"90"}})],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sceneList,"header-row-style":e.headerStyle,"cell-style":e.cellCss,size:"mini"}},[s("el-table-column",{attrs:{prop:"name",label:"场景识别",width:"90"}}),e._v(" "),s("el-table-column",{attrs:{prop:"value",label:"置信度",width:"90"}})],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.projList,"header-row-style":e.headerStyle,"cell-style":e.cellCss,size:"mini"}},[s("el-table-column",{attrs:{prop:"name",label:"物体识别",width:"90"}}),e._v(" "),s("el-table-column",{attrs:{prop:"value",label:"所占比例",width:"90"}})],1)],1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!=this.showImgList.length,expression:"this.showImgList.length == 0? false:true"}],staticClass:"mapMiddle"},[s("div",{staticClass:"icon left",on:{click:e.trigerLeftClick}},[s("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),s("ul",e._l(e.showImgList,function(t,i){return s("li",{key:t.id,class:{active:i===e.current},on:{click:function(t){e.trigerClick(i)}}},[2!==t.stitchingStatus?s("img",{attrs:{src:t.fileUrl}}):s("img",{attrs:{src:a("gVQo")}})])})),e._v(" "),s("div",{staticClass:"clear"}),e._v(" "),s("div",{staticClass:"icon right",on:{click:e.trigerRightClick}},[s("i",{staticClass:"el-icon-arrow-right"})])]),e._v(" "),e.showImg?s("big-img",{attrs:{imgSrc:e.imgSrc},on:{clickit:e.viewImg}}):e._e(),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!=this.showImgList.length,expression:"this.showImgList.length == 0? false:true"}],staticClass:"mapBottom"},[s("div",{staticClass:"bottomLeft"},[s("img",{directives:[{name:"show",rawName:"v-show",value:2!==e.stitchingStatus,expression:"stitchingStatus !== 2"}],attrs:{src:e.currenImg.fileUrl,alt:"图片拼接失败！"},on:{click:function(t){e.clickImg(t)}}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2===e.stitchingStatus,expression:"stitchingStatus === 2"}],staticClass:"error",staticStyle:{height:"580px"}},[s("h2",[e._v("图片拼接失败！")])])]),e._v(" "),s("div",{staticClass:"bottomRight"},[s("div",{staticClass:"tittle"},[e._v("识别结果")]),e._v(" "),s("div",[s("h3",{directives:[{name:"show",rawName:"v-show",value:2!==e.stitchingStatus,expression:"stitchingStatus !== 2"}],staticClass:"scene"},[e._v("场景")]),e._v(" "),s("ul",{staticClass:"msg"},e._l(e.sceneList,function(t){return"是否合成图"!==t.name?s("li",{key:t.name},[e._v(e._s(t.name))]):e._e()})),e._v(" "),s("ul",{staticClass:"present"},e._l(e.sceneList,function(t){return"string"!=typeof t.present?s("li",{key:t.name},[s("el-progress",{attrs:{percentage:t.present,color:"#67C23A","stroke-width":15}})],1):e._e()})),e._v(" "),s("div",{staticClass:"clear"})]),e._v(" "),s("div",[s("h3",{directives:[{name:"show",rawName:"v-show",value:2!==e.stitchingStatus,expression:"stitchingStatus !== 2"}],staticClass:"object"},[e._v("物体")]),e._v(" "),s("ul",{staticClass:"msg"},e._l(e.projList,function(t){return s("li",{key:t.name},[e._v(e._s(t.name))])})),e._v(" "),s("ul",{staticClass:"present"},e._l(e.projList,function(e){return s("li",{key:e.name},[s("el-progress",{attrs:{percentage:e.present,color:"#67C23A","stroke-width":15}})],1)})),e._v(" "),s("div",{staticClass:"clear"})]),e._v(" "),s("div",[s("h3",{directives:[{name:"show",rawName:"v-show",value:2!==e.stitchingStatus,expression:"stitchingStatus !== 2"}],staticClass:"object"},[e._v("物体测距")]),e._v(" "),e._l(e.distentList,function(t){return s("div",{key:t.name},[s("h4",[e._v(e._s(t.name))]),e._v(" "),s("ul",{staticClass:"msg"},e._l(t.section,function(t){return s("li",{key:t.distent},[e._v(e._s(t.distent))])})),e._v(" "),s("ul",{staticClass:"present"},e._l(t.section,function(e){return s("li",{key:e.distent},[s("el-progress",{attrs:{percentage:e.value,color:"#67C23A","stroke-width":15}})],1)})),e._v(" "),s("div",{staticClass:"clear"})])})],2)])])],1)},staticRenderFns:[]};var $=a("VU/8")(E,U,!1,function(e){a("aHZT"),a("hyyO")},"data-v-2cf5a104",null).exports,B={data:function(){return{pictureList:[],time:"",pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},methods:{onSubmit:function(){var e=parseInt(this.time[0].getTime()/1e3),t=parseInt(this.time[1].getTime()/1e3);this.getImgByTime(e,t)},getImgByTime:function(e,t){var a=this,s=this.setAPIPath("/picSearchByTime");this.$axios.get(s,{params:{beginTime:e,endTime:t}}).then(function(e){0===e.data.code?a.pictureList=e.data.data:a.errorMsg(e.data.code,a)}).catch(function(e){console.log(e)})}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"byTimeSearch"},[a("div",{staticClass:"filter"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2,size:"small"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSubmit}},[e._v("查询")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pictureList,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"照片ID"}},[a("span",[e._v(e._s(t.row.fileID))])]),e._v(" "),a("el-form-item",{attrs:{label:"照片角度标号"}},[a("span",[e._v(e._s(t.row.angleIdx))])]),e._v(" "),a("el-form-item",{attrs:{label:"海拔高度"}},[a("span",[e._v(e._s(t.row.picAltitude))])]),e._v(" "),a("el-form-item",{attrs:{label:"下倾角"}},[a("span",[e._v(e._s(t.row.picElevationAngle))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"拍摄时间",prop:"picTime"}}),e._v(" "),a("el-table-column",{attrs:{label:"任务ID",prop:"taskID"}}),e._v(" "),a("el-table-column",{attrs:{label:"经度",prop:"picLongitude"}}),e._v(" "),a("el-table-column",{attrs:{label:"纬度",prop:"picLatitude"}}),e._v(" "),a("el-table-column",{attrs:{label:"方向角",prop:"picDirectAngle"}})],1)],1)},staticRenderFns:[]};var q={data:function(){return{pictureList:[],selectCell:{bscID:"",cellID:""},bscList:[],cellList:[],time:"",cellTree:[{id:1,label:"珠海移动",children:[]}],defaultProps:{children:"children",label:"label"}}},created:function(){this.getCell()},methods:{getCell:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/cell");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;e.cellList.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}e.getBsc(),e.getBscTree()}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},getBsc:function(){for(var e,t=0,a=this.cellList.length;t<a;t++){e=!1;for(var s=0,i=this.bscList.length;s<i;s++)this.cellList[t].bscID===this.bscList[s].bscID&&(e=!0);if(!e){var l={bscID:this.cellList[t].bscID,bscName:this.cellList[t].bscName};this.bscList.push(l)}}},getBscTree:function(){this.id=this.cellTree[0].id;for(var e=0,t=this.bscList.length;e<t;e++){var a={};a.id=++this.id,a.label=this.bscList[e].bscName,a.children=this.getCellTree(this.bscList[e].bscID),this.cellTree[0].children.push(a)}},getCellTree:function(e){for(var t=[],a=0,s=this.cellList.length;a<s;a++){var i={id:0,label:"",children:[],cell:{}};this.cellList[a].bscID===e&&(i.id=++this.id,i.label=this.cellList[a].cellName,i.cell=this.cellList[a],t.push(i))}return t},getCheckedNodes:function(){var e=this.$refs.tree.getCheckedNodes(),t="",a=!0,s=!1,i=void 0;try{for(var l,r=p()(e);!(a=(l=r.next()).done);a=!0){var n=l.value;n.hasOwnProperty("cell")&&(t+=n.cell.bscID+","+n.cell.cellID+";")}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}this.getPicByCell(t)},getPicByCell:function(e){var t=this,a=this.setAPIPath("/picSearchByCell");this.$axios.get(a,{params:{bscCellIDs:e}}).then(function(e){0===e.data.code?t.pictureList=e.data.data:t.errorMsg(e.data.code,t)}).catch(function(e){console.log(e)})}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"byCellSerch"},[a("div",{staticClass:"treeClass"},[a("el-tree",{ref:"tree",attrs:{data:e.cellTree,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps},on:{"check-change":e.getCheckedNodes}})],1),e._v(" "),a("div",{staticClass:"cellResult"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pictureList,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"照片ID"}},[a("span",[e._v(e._s(t.row.fileID))])]),e._v(" "),a("el-form-item",{attrs:{label:"照片角度标号"}},[a("span",[e._v(e._s(t.row.angleIdx))])]),e._v(" "),a("el-form-item",{attrs:{label:"海拔高度"}},[a("span",[e._v(e._s(t.row.picAltitude))])]),e._v(" "),a("el-form-item",{attrs:{label:"下倾角"}},[a("span",[e._v(e._s(t.row.picElevationAngle))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"拍摄时间",prop:"picTime"}}),e._v(" "),a("el-table-column",{attrs:{label:"任务ID",prop:"taskID"}}),e._v(" "),a("el-table-column",{attrs:{label:"经度",prop:"picLongitude"}}),e._v(" "),a("el-table-column",{attrs:{label:"纬度",prop:"picLatitude"}}),e._v(" "),a("el-table-column",{attrs:{label:"方向角",prop:"picDirectAngle"}})],1)],1)])},staticRenderFns:[]};var O={data:function(){return{cellList:[],showList:[],cellID:"",cellName:"",user:""}},created:function(){this.user=this.getCookie("userID"),this.getIDs()},methods:{getIDs:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/cell");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;e.getRecognizeResult(n.bscID,n.cellID,n.cellName)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},getRecognizeResult:function(e,t,a){var s=this,i=new URLSearchParams,l=this.setAPIPath("/recognition/"+e+"/"+t);this.$axios.get(l,i).then(function(e){if(0===e.data.code){var i=!0,l=!1,r=void 0;try{for(var n,o=p()(e.data.data);!(i=(n=o.next()).done);i=!0){var c=n.value;if(1===c.isStitchingPic){var u={cellID:t,cellName:a,imgSceneArray:c.recognizeScenes,imgObjArray:c.recognizeObjects};s.cellList.push(u)}}}catch(e){l=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(l)throw r}}s.setShowList()}else s.errorMsg(e.data.code,s)}).catch(function(e){console.log(e)})},setShowList:function(){var e=!0,t=!1,a=void 0;try{for(var s,i=p()(this.cellList);!(e=(s=i.next()).done);e=!0){for(var l=s.value,r={cellID:l.cellID,cellName:l.cellName},n=0;n<5;n++){var o="scene"+n;l.imgSceneArray[n]?r[o]=l.imgSceneArray[n].yidongSceneName+" "+parseInt(100*l.imgSceneArray[n].confidence)+"%":r[o]=""}for(var c=0;c<5;c++){var u="object"+c;l.imgObjArray[c]?r[u]=l.imgObjArray[c].basicObjectName+" "+parseInt(100*l.imgObjArray[c].rate)+"%":r[u]=""}this.showList.push(r)}}catch(e){t=!0,a=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw a}}},downLoadImg:function(e){var t=new URLSearchParams,a=this.setAPIPath("/downloadRawPics/"+e);this.$axios.get(a,t).then(function(e){e.data.code}).catch(function(e){console.log(e)})}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"dataForm"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.showList,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"小区ID"}},[a("span",[e._v(e._s(t.row.cellID))])]),e._v(" "),a("el-form-item",{attrs:{label:"小区名称"}},[a("span",[e._v(e._s(t.row.cellName))])]),e._v(" "),a("el-form-item",{attrs:{label:"场景1"}},[a("span",[e._v(e._s(t.row.scene0))])]),e._v(" "),a("el-form-item",{attrs:{label:"场景2"}},[a("span",[e._v(e._s(t.row.scene1))])]),e._v(" "),a("el-form-item",{attrs:{label:"场景3"}},[a("span",[e._v(e._s(t.row.scene2))])]),e._v(" "),a("el-form-item",{attrs:{label:"场景4"}},[a("span",[e._v(e._s(t.row.scene3))])]),e._v(" "),a("el-form-item",{attrs:{label:"场景5"}},[a("span",[e._v(e._s(t.row.scene4))])]),e._v(" "),a("el-form-item",{attrs:{label:"物体1"}},[a("span",[e._v(e._s(t.row.object0))])]),e._v(" "),a("el-form-item",{attrs:{label:"物体2"}},[a("span",[e._v(e._s(t.row.object1))])]),e._v(" "),a("el-form-item",{attrs:{label:"物体3"}},[a("span",[e._v(e._s(t.row.object2))])]),e._v(" "),a("el-form-item",{attrs:{label:"物体4"}},[a("span",[e._v(e._s(t.row.object3))])]),e._v(" "),a("el-form-item",{attrs:{label:"物体5"}},[a("span",[e._v(e._s(t.row.object4))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小区ID",prop:"cellID"}}),e._v(" "),a("el-table-column",{attrs:{label:"小区名称",prop:"cellName"}}),e._v(" "),a("el-table-column",{attrs:{label:"场景结果1",prop:"scene0"}}),e._v(" "),a("el-table-column",{attrs:{label:"场景结果2",prop:"scene1"}}),e._v(" "),a("el-table-column",{attrs:{label:"物体1",prop:"object0"}}),e._v(" "),a("el-table-column",{attrs:{label:"物体2",prop:"object1"}})],1)],1)])},staticRenderFns:[]};var Q={data:function(){return{fileList:[],endUrl:"",taskID:"",taskList:[],selectedOptions:[],user:""}},created:function(){this.user=this.getCookie("userID"),this.getTask()},watch:{taskID:function(e,t){this.endUrl=this.setAPIPath("/uploadRawPic/"+e),this.$refs.upload.clearFiles()}},methods:{errUpload:function(e,t,a){console.log("错误"),console.log(e)},successUpload:function(e,t,a){0!==e.code&&this.errorMsg(e.code,this)},getTask:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/task/"+this.user);this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;e.taskList.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},selectFile:function(){},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){},handlePreview:function(e){},checkNull:function(){if(!this.endUrl)return this.openMsg("请先选择要上传图片的任务！","error",this),!1}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uploadContain"},[a("div",{staticClass:"select"},[e._v("\n    选择任务：\n    "),a("el-select",{attrs:{placeholder:"请选择要上传图片的任务",size:"small"},model:{value:e.taskID,callback:function(t){e.taskID=t},expression:"taskID"}},e._l(e.taskList,function(e){return a("el-option",{key:e.bscID+"/"+e.cellID,attrs:{label:e.taskName,value:e.taskID}})}))],1),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:e.endUrl,multiple:"","before-upload":e.checkNull,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"on-error":e.errUpload,"on-success":e.successUpload,"auto-upload":!1,"list-type":"picture"}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")])],1)],1)},staticRenderFns:[]};var G={data:function(){return{singInList:[]}},created:function(){this.getSignIn()},methods:{getSignIn:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/getCurrentSignInUser");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;n.signInTime=e.dateFormat(n.signInTime),e.singInList.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})}}},Z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:this.singInList,stripe:""}},[t("el-table-column",{attrs:{prop:"userID",label:"用户ID"}}),this._v(" "),t("el-table-column",{attrs:{prop:"signInTime",label:"签到时间"}}),this._v(" "),t("el-table-column",{attrs:{prop:"signInLongitude",label:"经度"}}),this._v(" "),t("el-table-column",{attrs:{prop:"signInLatitude",label:"纬度"}})],1)],1)},staticRenderFns:[]};var W={data:function(){return{cellList:[],showList:[],taskID:"",taskList:[],cellID:"",cellName:"",user:""}},created:function(){this.user=this.getCookie("userID"),this.getTask(),this.getImgByTime()},methods:{handleDownload:function(e,t){this.getTaskID(t.cellID)},getTask:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/task/"+this.user);this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;e.taskList.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},getImgByTime:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/picSearchByTime"),s=new Date;s.setFullYear(2018,10,1),t.append("beginTime",parseInt(s.getTime()/1e3)),t.append("endTime",parseInt((new Date).getTime()/1e3)),this.$axios.get(a,t).then(function(t){0===t.data.code||e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},downLoad:function(){var e=this,t=this.setAPIPath("/downloadRawPics/"+this.taskID);this.$axios({method:"get",url:t,responseType:"blob"}).then(function(t){if("application/octet-stream"===t.data.type){if(!t)return;var a=window.URL.createObjectURL(t.data),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download","picture.zip"),document.body.appendChild(s),s.click(),e.openMsg("下载成功","success",e)}else e.openMsg("下载失败","error",e)})},downLoadMatrix:function(){var e=this,t=this.setAPIPath("/featureMatrix");this.$axios({method:"get",url:t,responseType:"blob"}).then(function(t){if("application/octet-stream"===t.data.type){var a=window.URL.createObjectURL(t.data),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download","featureMatrix.csv"),document.body.appendChild(s),s.click(),e.openMsg("导出成功","success",e)}else e.openMsg("导出失败","error",e)})},downLoadSimilar:function(){var e=this,t=this.setAPIPath("/featureSimilar");this.$axios({method:"get",url:t,responseType:"blob"}).then(function(t){if("application/octet-stream"===t.data.type){var a=window.URL.createObjectURL(t.data),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download","featureSimilar.csv"),document.body.appendChild(s),s.click(),e.openMsg("导出成功","success",e)}else e.openMsg("导出失败","error",e)})}},components:{byTime:a("VU/8")(B,j,!1,function(e){a("4Wgt")},null,null).exports,byCell:a("VU/8")(q,z,!1,function(e){a("yy1c"),a("t3NY")},"data-v-ebe68080",null).exports,result:a("VU/8")(O,H,!1,function(e){a("1Kqt")},"data-v-31583a86",null).exports,upLoad:a("VU/8")(Q,V,!1,function(e){a("s71j"),a("hmiD"),a("RgXu")},"data-v-22213386",null).exports,signIn:a("VU/8")(G,Z,!1,function(e){a("hED0")},"data-v-296d2648",null).exports}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container inquire"},[a("div",{staticClass:"TopTitle"},[e._v("数据管理")]),e._v(" "),a("el-tabs",{staticClass:"thisTab",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"时间查询"}},[a("by-time")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"区域查询"}},[a("by-cell")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"签到查询"}},[a("sign-in")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"本地上传"}},[a("up-load")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"下载图片"}},[e._v("\n      选择任务：\n      "),a("el-select",{staticClass:"select",attrs:{placeholder:"请选择要下载图片的任务",size:"small"},model:{value:e.taskID,callback:function(t){e.taskID=t},expression:"taskID"}},e._l(e.taskList,function(e){return a("el-option",{key:e.bscID+"/"+e.cellID,attrs:{label:e.taskName,value:e.taskID}})})),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.downLoad}},[e._v("下载原始图片")])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"导出特征矩阵"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.downLoadMatrix}},[e._v("导出已完成任务特征矩阵")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.downLoadSimilar}},[e._v("导出已完成任务特征相似度")])],1)],1)],1)},staticRenderFns:[]};var X=a("VU/8")(W,K,!1,function(e){a("AMrm")},"data-v-0100e266",null).exports,Y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v(this._s(this.msg))])])},staticRenderFns:[]};var J=a("VU/8")({data:function(){return{msg:"统计分析"}}},Y,!1,function(e){a("ko1r")},"data-v-65c3039e",null).exports,ee={data:function(){return{userList:[],user:"",visible:!1,currentList:{},userType:"",addUserList:{userID:"",userName:"",userType:"",mobile:"",location:"",email:""},rules:{userID:[{required:!0,message:"不能为空！",trigger:"blur"}]}}},mounted:function(){this.getUserList(),this.user=this.getCookie("userID")},methods:{checkRule:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.handleSubmit()})},handleSubmit:function(){var e,t=this,a=!0;switch(this.addUserList.userType){case"管理员":e=0;break;case"发布人员":e=1;break;case"拍摄人员":e=2;break;default:console.log("错误")}for(var s in this.currentList)this.currentList[s]!==this.addUserList[s]&&(a=!1);if(a)this.openMsg("请修改后再提交","error",this);else{var i=new URLSearchParams,l=this.setAPIPath("/user");i.append("userID",this.addUserList.userID),i.append("userType",e),i.append("userName",this.addUserList.userName),i.append("mobile",this.addUserList.mobile),i.append("email",this.addUserList.email),i.append("location",this.addUserList.location),this.$axios.put(l,i).then(function(e){0===e.data.code?(t.openMsg("修改成功！","success",t),t.visible=!1,t.getUserList()):t.errorMsg(e.data.code,t)}).catch(function(e){console.log(e)})}},handleEdit:function(e,t){for(var a in this.userType=t.userType,t)this.addUserList[a]=t[a],this.currentList[a]=t[a];this.visible=!0},clear:function(){for(var e in this.addUserList)this.addUserList[e]=this.currentList[e]},alertMess:function(e,t){var a=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.handleDelete(e,t)}).catch(function(){a.openMsg("取消删除！","",a)})},handleDelete:function(e,t){var a=this,s=new URLSearchParams,i=this.setAPIPath("/user/"+t.userID);this.$axios.delete(i,s).then(function(e){0===e.data.code?(a.openMsg("删除成功！","success",a),a.userList.length=0,a.getUserList()):a.errorMsg(e.data.code,a)}).catch(function(e){console.log(e)})},getUserList:function(){var e=this;this.userList.length=0;var t=new URLSearchParams,a=this.setAPIPath("/user");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;switch(n.userType){case 0:n.userType="管理员";break;case 1:n.userType="发布人员";break;case 2:n.userType="拍摄人员";break;default:alert("错误！")}e.userList.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})}}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,size:"small"}},[a("el-table-column",{attrs:{label:"用户ID",width:"110",prop:"userID"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户类型",width:"110",prop:"userType"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名称",width:"110",prop:"userName"}}),e._v(" "),a("el-table-column",{attrs:{label:"手机号码",width:"150",prop:"mobile"}}),e._v(" "),a("el-table-column",{attrs:{label:"邮箱",width:"190",prop:"email"}}),e._v(" "),a("el-table-column",{attrs:{label:"定位",width:"150",prop:"location"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.alertMess(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"用户编辑",width:"30%",visible:e.visible,id:"userDialog"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"thisContain"},[a("el-form",{ref:"form",staticClass:"demo-form-inline demo-ruleForm aditUser inputControl",attrs:{model:e.addUserList,rules:e.rules,size:"mini","label-width":"90px"}},[a("el-form-item",{attrs:{label:"用户ID",prop:"userID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.addUserList.userID,callback:function(t){e.$set(e.addUserList,"userID",t)},expression:"addUserList.userID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.addUserList.userType,callback:function(t){e.$set(e.addUserList,"userType",t)},expression:"addUserList.userType"}},[a("el-option",{directives:[{name:"show",rawName:"v-show",value:"管理员"===e.userType,expression:"userType === '管理员'? true:false"}],attrs:{label:"管理员",value:"管理员"}}),e._v(" "),a("el-option",{attrs:{label:"发布人员",value:"发布人员"}}),e._v(" "),a("el-option",{attrs:{label:"拍摄人员",value:"拍摄人员"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{model:{value:e.addUserList.userName,callback:function(t){e.$set(e.addUserList,"userName",t)},expression:"addUserList.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话号码",prop:"mobile"}},[a("el-input",{model:{value:e.addUserList.mobile,callback:function(t){e.$set(e.addUserList,"mobile",t)},expression:"addUserList.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.addUserList.email,callback:function(t){e.$set(e.addUserList,"email",t)},expression:"addUserList.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"归属地",prop:"location"}},[a("el-input",{model:{value:e.addUserList.location,callback:function(t){e.$set(e.addUserList,"location",t)},expression:"addUserList.location"}})],1)],1),e._v(" "),a("div",{staticClass:"bottomBtn"},[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:e.clear}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.checkRule}},[e._v("提交")])],1)],1)])],1)},staticRenderFns:[]};var ae=a("VU/8")(ee,te,!1,function(e){a("p3+U")},"data-v-4c76f7de",null).exports,se={data:function(){var e=this,t=function(t,a,s){isNaN(e.editCell[t.fullField])?s(new Error("只能填数字！")):parseFloat(e.editCell[t.fullField])<0?s(new Error("不能小于0！")):(e.editCell[t.fullField]=parseFloat(e.editCell[t.fullField]),s())};return{userID:"",userType:"",cellList:[],currentList:{},editCell:{bscID:"",cellID:"",cellName:"",bscName:"",lac:"",longitude:"",latitude:"",altitude:"",elevationAngle:"",directAngle:"",coverAngleBegin:0,coverAngleEnd:360,coverDistance:""},isOpenMap:!0,zoom:16,positionCell:[113.58811,22.23263],cellMapEvents:{click:function(t){var a=e.gcjToWgsExactly(t.lnglat.lat,t.lnglat.lng),s=a.lon,i=a.lat;e.editCell.longitude=Math.ceil(1e5*s)/1e5,e.editCell.latitude=Math.ceil(1e5*i)/1e5,e.positionCell=[t.lnglat.lng,t.lnglat.lat]}},checkForm:[],visible:!1,result:!1,rules:{bscID:[{required:!0,message:"不能为空！",trigger:"blur"}],cellID:[{required:!0,message:"不能为空！",trigger:"blur"}],cellName:[{required:!0,message:"不能为空！",trigger:"blur"}],bscName:[{required:!0,message:"不能为空！",trigger:"blur"}],lac:[{required:!0,message:"不能为空！",trigger:"blur"}],longitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],latitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],altitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],elevationAngle:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],directAngle:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],coverAngleBegin:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],coverAngleEnd:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],coverDistance:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}]}}},mounted:function(){this.userID=this.getCookie("userID"),this.userType=this.getCookie("userType"),this.toCellList()},watch:{takePhotoLongitude:function(e,t){if(e){var a=this.wgsToGcj(this.takePhotoLatitude,e),s=a.lon,i=a.lat;this.positionCell=[s,i]}},takePhotoLatitude:function(e,t){if(e){var a=this.wgsToGcj(e,this.takePhotoLongitude),s=a.lon,i=a.lat;this.positionCell=[s,i]}}},computed:{takePhotoLongitude:function(){return this.editCell.longitude},takePhotoLatitude:function(){return this.editCell.latitude}},methods:{toCellList:function(){var e=this;this.cellList.length=0;var t=new URLSearchParams,a=this.setAPIPath("/cell");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;e.cellList.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},handleEdit:function(e,t){for(var a in t)this.editCell[a]=t[a],this.currentList[a]=t[a];var s=this.wgsToGcj(t.latitude,t.longitude),i=s.lon,l=s.lat;this.positionCell=[i,l],this.visible=!0},clear:function(){for(var e in this.editCell)this.editCell[e]=this.currentList[e]},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久该小区, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteCell(e,t)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},deleteCell:function(e,t){var a=this,s=new URLSearchParams,i=this.setAPIPath("/cell/"+t.bscID+"/"+t.cellID);this.$axios.delete(i,s).then(function(e){0===e.data.code?(a.openMsg("删除成功！","success",a),a.cellList.length=0,a.toCellList()):10===e.data.code?a.openMsg("删除失败，该小区已有任务，请先删除任务在执行删除小区操作！","error",a):a.errorMsg(e.data.code,a)}).catch(function(e){console.log(e)})},checkRule:function(){var e=this;this.$refs.form1.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.cellSubmit()})},checkChange:function(){var e=!0;for(var t in this.currentList)this.currentList[t]!==this.editCell[t]&&(e=!1);e?this.openMsg("请修改后再提交","error",this):this.checkRule()},cellSubmit:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/cell");t.append("bscID",this.editCell.bscID),t.append("cellID",this.editCell.cellID),t.append("bscName",this.editCell.bscName),t.append("cellName",this.editCell.cellName),t.append("lac",this.editCell.lac),t.append("longitude",parseFloat(this.editCell.longitude)),t.append("latitude",parseFloat(this.editCell.latitude)),t.append("altitude",parseFloat(this.editCell.altitude)),t.append("elevationAngle",parseFloat(this.editCell.elevationAngle)),t.append("directAngle",parseFloat(this.editCell.directAngle)),t.append("coverAngleBegin",parseFloat(this.editCell.coverAngleBegin)),t.append("coverAngleEnd",parseFloat(this.editCell.coverAngleEnd)),t.append("coverDistance",parseInt(this.editCell.coverDistance)),this.$axios.put(a,t).then(function(t){0===t.data.code?(e.openMsg("提交成功！","success",e),e.visible=!1,e.toCellList()):e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})}}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticClass:"cell",staticStyle:{width:"100%"},attrs:{data:e.cellList,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{inline:""}},[a("el-form-item",{attrs:{label:"基站ID："}},[a("span",[e._v(e._s(t.row.bscID))])]),e._v(" "),a("el-form-item",{attrs:{label:"小区ID："}},[a("span",[e._v(e._s(t.row.cellID))])]),e._v(" "),a("el-form-item",{attrs:{label:"小区lac："}},[a("span",[e._v(e._s(t.row.lac))])]),e._v(" "),a("el-form-item",{attrs:{label:"海拔高度："}},[a("span",[e._v(e._s(t.row.altitude))])]),e._v(" "),a("el-form-item",{attrs:{label:"覆盖距离："}},[a("span",[e._v(e._s(t.row.coverDistance))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"基站名称",prop:"bscName",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"小区名称",prop:"cellName",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"经度",prop:"longitude",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"纬度",prop:"latitude",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"下倾角",prop:"elevationAngle",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"方向角",prop:"directAngle",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",disabled:"2"===e.userType},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",disabled:"2"===e.userType},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"小区编辑",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"cellEdit inputControl"},[a("el-form",{ref:"form1",staticClass:"demo-form-inline demo-ruleForm",staticStyle:{"text-align":"left"},attrs:{inline:!0,model:e.editCell,rules:e.rules,size:"mini","label-width":"120px"}},[a("el-form-item",{attrs:{label:"基站名称",prop:"bscName"}},[a("el-input",{model:{value:e.editCell.bscName,callback:function(t){e.$set(e.editCell,"bscName",t)},expression:"editCell.bscName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称",prop:"cellName"}},[a("el-input",{model:{value:e.editCell.cellName,callback:function(t){e.$set(e.editCell,"cellName",t)},expression:"editCell.cellName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区lac",prop:"lac"}},[a("el-input",{model:{value:e.editCell.lac,callback:function(t){e.$set(e.editCell,"lac",t)},expression:"editCell.lac"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经度",prop:"longitude"}},[a("el-input",{model:{value:e.editCell.longitude,callback:function(t){e.$set(e.editCell,"longitude",t)},expression:"editCell.longitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纬度",prop:"latitude"}},[a("el-input",{model:{value:e.editCell.latitude,callback:function(t){e.$set(e.editCell,"latitude",t)},expression:"editCell.latitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"海拔高度",prop:"altitude"}},[a("el-input",{model:{value:e.editCell.altitude,callback:function(t){e.$set(e.editCell,"altitude",t)},expression:"editCell.altitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下倾角",prop:"elevationAngle"}},[a("el-input",{model:{value:e.editCell.elevationAngle,callback:function(t){e.$set(e.editCell,"elevationAngle",t)},expression:"editCell.elevationAngle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"方向角",prop:"directAngle"}},[a("el-input",{model:{value:e.editCell.directAngle,callback:function(t){e.$set(e.editCell,"directAngle",t)},expression:"editCell.directAngle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"覆盖方向角起点",prop:"coverAngleBegin"}},[a("el-input",{model:{value:e.editCell.coverAngleBegin,callback:function(t){e.$set(e.editCell,"coverAngleBegin",t)},expression:"editCell.coverAngleBegin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"覆盖方向角终点",prop:"coverAngleEnd"}},[a("el-input",{model:{value:e.editCell.coverAngleEnd,callback:function(t){e.$set(e.editCell,"coverAngleEnd",t)},expression:"editCell.coverAngleEnd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"覆盖距离",prop:"coverDistance"}},[a("el-input",{model:{value:e.editCell.coverDistance,callback:function(t){e.$set(e.editCell,"coverDistance",t)},expression:"editCell.coverDistance"}})],1)],1),e._v(" "),a("div",{staticClass:"bottomBtn"},[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:e.clear}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.checkChange}},[e._v("提交")])],1)],1),e._v(" "),a("div",{staticClass:"editMap"},[e.isOpenMap?a("div",{staticStyle:{border:"solid lightblue 1px",height:"100%",marginTop:"10px"}},[a("el-amap",{attrs:{vid:"amapCameraCell",events:e.cellMapEvents}},[a("el-amap-marker",{attrs:{position:e.positionCell}})],1)],1):e._e()])])],1)},staticRenderFns:[]};var le=a("VU/8")(se,ie,!1,function(e){a("Zvyo")},null,null).exports,re={data:function(){return{addUserList:{userID:"",userType:"",userName:"",mobile:"",email:"",location:""},rules:{userID:[{required:!0,message:"不能为空！",trigger:"blur"}],userType:[{required:!0,message:"不能为空！",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},logInUser:"",index:"",userFlag:!1}},created:function(){},mounted:function(){},methods:{handleSubmit:function(){var e=this;this.$refs.form1.validate(function(t){if(!t)return!1;e.addUser()})},addUser:function(){var e,t=this;switch(this.addUserList.userType){case"管理员":e=0;break;case"发布人员":e=1;break;case"拍摄人员":e=2;break;default:console.log("错误")}var a=new URLSearchParams,s=this.setAPIPath("/user");a.append("userID",this.addUserList.userID),a.append("userType",e),a.append("userName",this.addUserList.userName),a.append("mobile",this.addUserList.mobile),a.append("email",this.addUserList.email),a.append("location",this.addUserList.location),this.$axios.post(s,a).then(function(e){0===e.data.code?(t.openMsg("增加成功！","success",t),t.$emit("showFlag",t.userFlag)):t.errorMsg(e.data.code,t)}).catch(function(e){console.log(e)})},clear:function(){for(var e in this.addUserList)this.addUserList[e]=""}}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{ref:"form1",staticClass:"demo-form-inline demo-ruleForm aditUser inputControl",attrs:{model:e.addUserList,rules:e.rules,size:"mini","label-width":"90px"}},[a("el-form-item",{attrs:{label:"用户ID",prop:"userID"}},[a("el-input",{model:{value:e.addUserList.userID,callback:function(t){e.$set(e.addUserList,"userID",t)},expression:"addUserList.userID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[a("el-select",{attrs:{placeholder:"请选择用户类型"},model:{value:e.addUserList.userType,callback:function(t){e.$set(e.addUserList,"userType",t)},expression:"addUserList.userType"}},[a("el-option",{attrs:{label:"发布人员",value:"发布人员"}}),e._v(" "),a("el-option",{attrs:{label:"拍摄人员",value:"拍摄人员"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{model:{value:e.addUserList.userName,callback:function(t){e.$set(e.addUserList,"userName",t)},expression:"addUserList.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话号码",prop:"mobile"}},[a("el-input",{model:{value:e.addUserList.mobile,callback:function(t){e.$set(e.addUserList,"mobile",t)},expression:"addUserList.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.addUserList.email,callback:function(t){e.$set(e.addUserList,"email",t)},expression:"addUserList.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"归属地",prop:"location"}},[a("el-input",{model:{value:e.addUserList.location,callback:function(t){e.$set(e.addUserList,"location",t)},expression:"addUserList.location"}})],1),e._v(" "),a("div",{staticClass:"userButton"},[a("el-button",{staticClass:"submitBtn",attrs:{size:"mini",type:"info"},on:{click:e.clear}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var oe=a("VU/8")(re,ne,!1,function(e){a("gqfb")},"data-v-a3f410aa",null).exports,ce=a("mvHQ"),ue=a.n(ce),de={data:function(){var e=this,t=function(t,a,s){isNaN(e.addCellList[t.fullField])?s(new Error("只能填数字！")):parseFloat(e.addCellList[t.fullField])<0?s(new Error("不能小于0！")):(e.addCellList[t.fullField]=parseFloat(e.addCellList[t.fullField]),s())};return{addCellList:{bscID:"",cellID:"",cellName:"",bscName:"",lac:"",longitude:"",latitude:"",altitude:"",elevationAngle:"",directAngle:"",coverAngleBegin:"0",coverAngleEnd:"0",coverDistance:""},cellList:[],isOpenMap:!0,positionCell:[113.58811,22.23263],addCellMapEvents:{click:function(t){var a=e.gcjToWgsExactly(t.lnglat.lat,t.lnglat.lng),s=a.lon,i=a.lat;e.addCellList.longitude=Math.ceil(1e5*s)/1e5,e.addCellList.latitude=Math.ceil(1e5*i)/1e5,e.positionCell=[t.lnglat.lng,t.lnglat.lat]}},checkForm:[],result:!1,rules:{bscID:[{required:!0,message:"不能为空！",trigger:"blur"}],cellID:[{required:!0,message:"不能为空！",trigger:"blur"}],cellName:[{required:!0,message:"不能为空！",trigger:"blur"}],bscName:[{required:!0,message:"不能为空！",trigger:"blur"}],lac:[{required:!0,message:"不能为空！",trigger:"blur"}],longitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],latitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],altitude:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],elevationAngle:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],directAngle:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],coverAngleBegin:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],coverAngleEnd:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],coverDistance:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}]},user:"",userFlag:!1}},mounted:function(){this.user=this.getCookie("userID"),this.getCell()},watch:{takePhotoLongitude:function(e,t){if(e){var a=this.wgsToGcj(this.takePhotoLatitude,e),s=a.lon,i=a.lat;this.positionCell=[s,i]}},takePhotoLatitude:function(e,t){if(e){var a=this.wgsToGcj(e,this.takePhotoLongitude),s=a.lon,i=a.lat;this.positionCell=[s,i]}},bscID:function(e,t){var a={},s=!0,i=!1,l=void 0;try{for(var r,n=p()(this.cellList);!(s=(r=n.next()).done);s=!0){var o=r.value;if(e===o.bscID){a=o;break}}}catch(e){i=!0,l=e}finally{try{!s&&n.return&&n.return()}finally{if(i)throw l}}"{}"!==ue()(a)?(this.addCellList.bscName=a.bscName,this.addCellList.longitude=a.longitude,this.addCellList.latitude=a.latitude,this.addCellList.altitude=a.altitude):(this.addCellList.bscName="",this.addCellList.longitude="",this.addCellList.latitude="",this.addCellList.altitude="")}},computed:{bscID:function(){return this.addCellList.bscID},takePhotoLongitude:function(){return this.addCellList.longitude},takePhotoLatitude:function(){return this.addCellList.latitude}},props:["cellVisible"],methods:{clear:function(){for(var e in this.addCellList)this.addCellList[e]=""},getCell:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/cell");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;e.cellList.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},handleClick:function(){var e=this;this.$refs.form1.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.cellSubmit()})},cellSubmit:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/cell");for(var s in t.append("bscID",this.addCellList.bscID),t.append("cellID",this.addCellList.cellID),t.append("bscName",this.addCellList.bscName),t.append("cellName",this.addCellList.cellName),t.append("lac",this.addCellList.lac),t.append("longitude",parseFloat(this.addCellList.longitude)),t.append("latitude",parseFloat(this.addCellList.latitude)),t.append("altitude",parseFloat(this.addCellList.altitude)),t.append("elevationAngle",parseFloat(this.addCellList.elevationAngle)),t.append("directAngle",parseFloat(this.addCellList.directAngle)),t.append("coverAngleBegin",0),t.append("coverAngleEnd",0),t.append("coverDistance",parseInt(this.addCellList.coverDistance)),this.addCellList)console.log(s+": "+this.addCellList[s]);this.$axios.post(a,t).then(function(t){if(0===t.data.code){for(var a in e.openMsg("增加成功！","success",e),e.addCellList)e.addCellList[a]="";e.$emit("showFlag",e.userFlag)}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})}}},he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container inputControl"},[a("el-form",{ref:"form1",staticClass:"demo-form-inline demo-ruleForm",staticStyle:{"text-align":"left"},attrs:{inline:!0,model:e.addCellList,rules:e.rules,size:"mini","label-width":"80px"}},[a("el-form-item",{attrs:{label:"基站ID",prop:"bscID"}},[a("el-input",{model:{value:e.addCellList.bscID,callback:function(t){e.$set(e.addCellList,"bscID",t)},expression:"addCellList.bscID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区ID",prop:"cellID"}},[a("el-input",{model:{value:e.addCellList.cellID,callback:function(t){e.$set(e.addCellList,"cellID",t)},expression:"addCellList.cellID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"基站名称",prop:"bscName"}},[a("el-input",{model:{value:e.addCellList.bscName,callback:function(t){e.$set(e.addCellList,"bscName",t)},expression:"addCellList.bscName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称",prop:"cellName"}},[a("el-input",{model:{value:e.addCellList.cellName,callback:function(t){e.$set(e.addCellList,"cellName",t)},expression:"addCellList.cellName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区lac",prop:"lac"}},[a("el-input",{model:{value:e.addCellList.lac,callback:function(t){e.$set(e.addCellList,"lac",t)},expression:"addCellList.lac"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经度",prop:"longitude"}},[a("el-input",{model:{value:e.addCellList.longitude,callback:function(t){e.$set(e.addCellList,"longitude",t)},expression:"addCellList.longitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纬度",prop:"latitude"}},[a("el-input",{model:{value:e.addCellList.latitude,callback:function(t){e.$set(e.addCellList,"latitude",t)},expression:"addCellList.latitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"海拔高度",prop:"altitude"}},[a("el-input",{model:{value:e.addCellList.altitude,callback:function(t){e.$set(e.addCellList,"altitude",t)},expression:"addCellList.altitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下倾角",prop:"elevationAngle"}},[a("el-input",{model:{value:e.addCellList.elevationAngle,callback:function(t){e.$set(e.addCellList,"elevationAngle",t)},expression:"addCellList.elevationAngle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"方向角",prop:"directAngle"}},[a("el-input",{model:{value:e.addCellList.directAngle,callback:function(t){e.$set(e.addCellList,"directAngle",t)},expression:"addCellList.directAngle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"覆盖距离",prop:"coverDistance"}},[a("el-input",{model:{value:e.addCellList.coverDistance,callback:function(t){e.$set(e.addCellList,"coverDistance",t)},expression:"addCellList.coverDistance"}})],1)],1),e._v(" "),a("el-form",{ref:"form7",staticClass:"demo-form-inline  demo-ruleForm",attrs:{inline:!0,model:e.addCellList,rules:e.rules,size:"mini","label-width":"120px"}}),e._v(" "),a("div",{staticClass:"cellButton"},[a("el-button",{staticClass:"submitBtn",attrs:{size:"mini",type:"info"},on:{click:e.clear}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleClick}},[e._v("提交")])],1),e._v(" "),a("div",{staticClass:"editMap"},[e.isOpenMap?a("div",{staticStyle:{border:"solid lightblue 1px",height:"100%",marginTop:"10px"}},[a("el-amap",{attrs:{vid:"amapCameraAddCell",events:e.addCellMapEvents}},[a("el-amap-marker",{attrs:{position:e.positionCell}})],1)],1):e._e()])],1)},staticRenderFns:[]};var me=a("VU/8")(de,he,!1,function(e){a("nmjb")},null,null).exports,pe=a("mtWM"),ge=a.n(pe),fe="http://172.16.10.21:5000",ve={data:function(){var e=this,t=function(t,a,s){"confidence"===t.field?isNaN(e.sceneParameter.confidence)?s(new Error("只能填数字！")):parseFloat(e.sceneParameter.confidence)<0||parseFloat(e.sceneParameter.confidence)>1?s(new Error("只能在0-1之间")):""!==a&&(e.sceneParameter.confidence=parseFloat(e.sceneParameter.confidence),s()):"rate"===t.field?""===a?s(new Error("不能为空！")):isNaN(e.objectParameter.rate)?s(new Error("只能填数字！")):parseFloat(e.sceneParameter.confidence)<0||parseFloat(e.sceneParameter.confidence)>100?s(new Error("百分比只能在0-100之间")):""!==a&&(e.objectParameter.rate=parseFloat(e.objectParameter.rate),s()):"passRate"===t.field?""===a?s(new Error("不能为空！")):isNaN(e.applyParameter.passRate)?s(new Error("只能填数字！")):parseFloat(e.applyParameter.passRate)<0||parseFloat(e.applyParameter.passRate)>1?s(new Error("百分比只能在0-1之间")):""!==a&&(e.applyParameter.passRate=parseFloat(e.applyParameter.passRate),s()):"plannerRate"===t.field&&(""===a?s(new Error("不能为空！")):isNaN(e.applyParameter.plannerRate)?s(new Error("只能填数字！")):parseFloat(e.applyParameter.plannerRate)<0||parseFloat(e.applyParameter.plannerRate)>1?s(new Error("百分比只能在0-1之间")):""!==a&&(e.applyParameter.plannerRate=parseFloat(e.applyParameter.plannerRate),s()))};return{userID:"",userVisible:!1,cellVisible:!1,userType:"",parametersLabel:"系统参数设置",activeName:"user",sceneParameter:{sceneTopNum:5,confidence:.05},objectParameter:{objTopNum:5,rate:.8},applyParameter:{passRate:.9,plannerRate:.8,applyTopNum:5},password:{oldPasswd:"",newPasswd:"",checkPasswd:""},rules:{confidence:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],rate:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],passRate:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],plannerRate:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:t,trigger:"blur"}],oldPasswd:[{required:!0,message:"不能为空！",trigger:"blur"}],newPasswd:[{required:!0,message:"不能为空！",trigger:"blur"}],checkPasswd:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:function(t,a,s){"newPasswd"===t.field?e.password.newPasswd===e.password.oldPasswd?s(new Error("新密码不能与旧密码相同！")):s():"checkPasswd"===t.field&&(e.password.newPasswd!==e.password.checkPasswd?s(new Error("两次密码输入不一致")):s())},trigger:"blur"}]}}},components:{user:ae,cell:le,addUser:oe,addCell:me},created:function(){this.userID=this.getCookie("userID"),this.userType=this.getCookie("userType"),this.showParameters()},mounted:function(){var e=this;ge.a.get(fe+"/updateConfig/sceneParameter").then(function(e){return e.data}).then(function(t){e.sceneParameter.sceneTopNum=t.data.topNum,e.sceneParameter.confidence=t.data.confidence}),ge.a.get(fe+"/updateConfig/objectParameter").then(function(e){return e.data}).then(function(t){e.objectParameter.objTopNum=t.data.topNum,e.objectParameter.rate=100*t.data.rate}),ge.a.get(fe+"/updateConfig/ApplicationParameter").then(function(e){return e.data}).then(function(t){e.applyParameter.passRate=t.data.accpetRate,e.applyParameter.plannerRate=t.data.planRate,e.applyParameter.planTopNum=t.data.planTopNum})},methods:{showParameters:function(){"0"!==this.userType&&(this.parametersLabel="")},showFlag:function(e){this.userVisible=e,this.cellVisible=e,this.$refs.user.getUserList(),this.$refs.cell.toCellList()},sceneSubmit:function(){var e=this;this.$refs.scenePara.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.undateScene()})},objectSubmit:function(){var e=this;this.$refs.objectPar.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.undateObject()})},applySubmit:function(){var e=this;this.$refs.applyPar.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.updateApply()})},passwordSubmit:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/passwd");t.append("userID",this.userID),t.append("oldPasswd",this.password.oldPasswd),t.append("newPasswd",this.password.newPasswd),this.$axios.put(a,t).then(function(t){if(0===t.data.code)for(var a in e.openMsg("修改成功！","success",e),e.password)e.password[a]="";else 1===t.data.code?e.openMsg("失败，旧密码输入错误！","error",e):e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},undateScene:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/updateConfig/sceneParameter");t.append("topNum",parseInt(this.sceneParameter.sceneTopNum)),t.append("confidence",this.sceneParameter.confidence),this.$axios.put(a,t).then(function(t){0===t.data.code?e.openMsg("提交成功！","success",e):e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},undateObject:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/updateConfig/objectParameter");t.append("topNum",parseInt(this.objectParameter.objTopNum)),t.append("confidence",this.objectParameter.rate),this.$axios.put(a,t).then(function(t){0===t.data.code?e.openMsg("提交成功！","success",e):e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},updateApply:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/updateConfig/ApplicationParameter");console.log(a),t.append("accpetRate",this.applyParameter.passRate),t.append("planRate",this.applyParameter.plannerRate),t.append("planTopNum",this.applyParameter.applyTopNum),this.$axios.put(a,t).then(function(t){0===t.data.code?e.openMsg("提交成功！","success",e):e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},handleUser:function(){this.userVisible=!0},handleCell:function(){this.cellVisible=!0}}},be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"TopTitle"},[e._v("系统管理")]),e._v(" "),a("div",{staticClass:"system"},[a("el-tabs",{attrs:{type:"border-card","tab-position":"left"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"用户管理",name:"user"}},[a("div",{staticClass:"user"},["0"===e.userType?a("div",{staticClass:"userList"},[a("div",{staticClass:"userTitle"},[e._v("用户列表")]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"success",size:"small"},on:{click:e.handleUser}},[e._v("增加用户")]),e._v(" "),a("user",{ref:"user"})],1):e._e(),e._v(" "),a("div",{staticClass:"userTitle"},[e._v("修改个人密码")]),e._v(" "),a("div",{staticClass:"changePsw"},[a("el-form",{ref:"password",staticClass:"demo-form-inline demo-ruleForm",attrs:{model:e.password,rules:e.rules,size:"mini","label-width":"150px"}},[a("el-form-item",{attrs:{label:"用户ID：",prop:"userID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userID,callback:function(t){e.userID=t},expression:"userID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"请输入旧密码：",prop:"oldPasswd"}},[a("el-input",{attrs:{type:"password"},model:{value:e.password.oldPasswd,callback:function(t){e.$set(e.password,"oldPasswd",t)},expression:"password.oldPasswd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"请输入新密码：",prop:"newPasswd"}},[a("el-input",{attrs:{type:"password"},model:{value:e.password.newPasswd,callback:function(t){e.$set(e.password,"newPasswd",t)},expression:"password.newPasswd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"请再次输入新密码：",prop:"checkPasswd"}},[a("el-input",{attrs:{type:"password"},model:{value:e.password.checkPasswd,callback:function(t){e.$set(e.password,"checkPasswd",t)},expression:"password.checkPasswd"}})],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.passwordSubmit}},[e._v("提交")])],1)],1)])]),e._v(" "),a("el-tab-pane",{attrs:{label:e.parametersLabel,name:"parameters",disabled:"0"!==e.userType}},[a("div",{staticClass:"scene"},[a("div",{staticClass:"userTitle"},[e._v("场景识别参数")]),e._v(" "),a("div",{staticClass:"sceneForm"},[a("el-form",{ref:"scenePara",staticClass:"demo-form-inline demo-ruleForm",attrs:{size:"mini",model:e.sceneParameter,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Top Number",prop:"sceneTopNum"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.sceneParameter.sceneTopNum,callback:function(t){e.$set(e.sceneParameter,"sceneTopNum",e._n(t))},expression:"sceneParameter.sceneTopNum"}},[a("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"2",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"3",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"4",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"5",value:"5"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"最小置信度",prop:"confidence"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"默认0.05，建议值0.01-0.1之间，可设置0.0-1.0之间",placement:"right-end"}},[a("el-input",{model:{value:e.sceneParameter.confidence,callback:function(t){e.$set(e.sceneParameter,"confidence",t)},expression:"sceneParameter.confidence"}})],1)],1),e._v(" "),a("el-button",{staticClass:"bottomBtn",attrs:{size:"mini",type:"primary"},on:{click:e.sceneSubmit}},[e._v("提交")])],1)],1)]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"object"},[a("div",{staticClass:"userTitle"},[e._v("物体识别参数")]),e._v(" "),a("div",{staticClass:"objectForm"},[a("el-form",{ref:"objectPar",staticClass:"demo-form-inline demo-ruleForm",attrs:{size:"mini",model:e.objectParameter,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Top Number",prop:"objTopNum"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.objectParameter.objTopNum,callback:function(t){e.$set(e.objectParameter,"objTopNum",e._n(t))},expression:"objectParameter.objTopNum"}},[a("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"2",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"3",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"4",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"5",value:"5"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"最小百分比",prop:"rate"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"默认0.8%，建议值0.3%-2%之间，可设置0%-100%之间",placement:"right-end"}},[a("el-input",{model:{value:e.objectParameter.rate,callback:function(t){e.$set(e.objectParameter,"rate",t)},expression:"objectParameter.rate"}},[a("i",{staticClass:"el-input__icon fa fa-percent",attrs:{slot:"suffix","aria-hidden":"true"},slot:"suffix"})])],1)],1),e._v(" "),a("el-button",{staticClass:"bottomBtn",attrs:{size:"mini",type:"primary"},on:{click:e.objectSubmit}},[e._v("提交")])],1)],1)]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"apply"},[a("div",{staticClass:"userTitle"},[e._v("应用参数")]),e._v(" "),a("div",{staticClass:"applyForm"},[a("el-form",{ref:"applyPar",staticClass:"demo-form-inline demo-ruleForm",attrs:{size:"mini",model:e.applyParameter,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"验收通过置信度",prop:"passRate"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"默认0.9，建议值0.8-1.0之间，可设置0.0-1.0之间",placement:"right-end"}},[a("el-input",{model:{value:e.applyParameter.passRate,callback:function(t){e.$set(e.applyParameter,"passRate",t)},expression:"applyParameter.passRate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规划场景置信度",prop:"plannerRate"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"默认0.8，建议值0.7-1.0之间，可设置0.0-1.0之间",placement:"right-end"}},[a("el-input",{model:{value:e.applyParameter.plannerRate,callback:function(t){e.$set(e.applyParameter,"plannerRate",t)},expression:"applyParameter.plannerRate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Top Number",prop:"applyTopNum"}},[a("el-select",{model:{value:e.applyParameter.applyTopNum,callback:function(t){e.$set(e.applyParameter,"applyTopNum",e._n(t))},expression:"applyParameter.applyTopNum"}},[a("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"2",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"3",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"4",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"5",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"6",value:"6"}}),e._v(" "),a("el-option",{attrs:{label:"7",value:"7"}}),e._v(" "),a("el-option",{attrs:{label:"8",value:"8"}}),e._v(" "),a("el-option",{attrs:{label:"9",value:"9"}}),e._v(" "),a("el-option",{attrs:{label:"10",value:"10"}})],1)],1),e._v(" "),a("el-button",{staticClass:"bottomBtn",attrs:{size:"mini",type:"primary"},on:{click:e.applySubmit}},[e._v("提交")])],1)],1)])]),e._v(" "),a("el-tab-pane",{attrs:{label:"小区管理",name:"cell"}},[a("div",{staticClass:"userTitle"},[e._v("小区列表")]),e._v(" "),a("el-button",{staticClass:"btn cellBtn",attrs:{type:"success",size:"small",disabled:"2"===e.userType},on:{click:e.handleCell}},[e._v("增加小区")]),e._v(" "),a("cell",{ref:"cell"})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"增加用户",width:"30%",visible:e.userVisible},on:{"update:visible":function(t){e.userVisible=t}}},[a("addUser",{on:{showFlag:e.showFlag}})],1),e._v(" "),a("el-dialog",{attrs:{title:"增加小区",width:"70%",visible:e.cellVisible},on:{"update:visible":function(t){e.cellVisible=t}}},[a("add-cell",{on:{showFlag:e.showFlag}})],1)],1)},staticRenderFns:[]};var Ie=a("VU/8")(ve,be,!1,function(e){a("qfRu"),a("+8LF")},"data-v-0b89b168",null).exports,ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.fileUrl,alt:e.fileID},on:{click:function(t){e.clickImg(t)}}})]),e._v(" "),a("h3",{staticClass:"scene"},[e._v("场景")]),e._v(" "),a("ul",{staticClass:"msg"},e._l(e.recognizeScenes,function(t){return a("li",{key:t.yidongSceneID},[e._v(e._s(t.yidongSceneName))])})),e._v(" "),a("ul",{staticClass:"present"},e._l(e.recognizeScenes,function(e){return a("li",{key:e.yidongSceneID},[a("el-progress",{attrs:{percentage:e.confidence,color:"#67C23A","stroke-width":15}})],1)})),e._v(" "),a("div",{staticClass:"clear"})]),e._v(" "),a("div",[a("h3",{staticClass:"object"},[e._v("物体")]),e._v(" "),a("ul",{staticClass:"msg"},e._l(e.recognizeObjects,function(t){return a("li",{key:t.basicObjectID},[e._v(e._s(t.basicObjectName))])})),e._v(" "),a("ul",{staticClass:"present"},e._l(e.recognizeObjects,function(e){return a("li",{key:e.basicObjectID},[a("el-progress",{attrs:{percentage:e.rate,color:"#67C23A","stroke-width":15}})],1)})),e._v(" "),a("div",{staticClass:"clear"})]),e._v(" "),a("div",[a("h3",{staticClass:"object"},[e._v("物体测距")]),e._v(" "),e._l(e.obscureObjects,function(t){return a("div",{key:t.obscureObjectID},[a("h4",[e._v(e._s(t.obscureObjectName))]),e._v(" "),a("ul",{staticClass:"msg"},e._l(t.depthRatePairs,function(t){return a("li",{key:t.depthRegionIdx},[e._v(e._s(t.depthRegionIdx))])})),e._v(" "),a("ul",{staticClass:"present"},e._l(t.depthRatePairs,function(e){return a("li",{key:e.depthRegionIdx},[a("el-progress",{attrs:{percentage:e.rate,color:"#67C23A","stroke-width":15}})],1)})),e._v(" "),a("div",{staticClass:"clear"})])})],2)])},staticRenderFns:[]};var Ce={name:"comparisonell",props:["showPass"],data:function(){return{showBigImg:{flag1:!1,flag2:!1},similar:0,accept:"",allList:{plan:{sceneList:[{name:"学校",value:"",present:20},{name:"停车场",value:"",present:30}],projList:[{name:"建筑",value:"",present:40},{name:"人行道",value:"",present:50}],distentList:[{name:"",section:[]}]},result:{sceneList:[{name:"学校",value:"",present:20},{name:"停车场",value:"",present:30}],projList:[{name:"建筑",value:"",present:40},{name:"人行道",value:"",present:50}],distentList:[{name:"",section:[]}]}},planCellList:{},resultCellList:{}}},methods:{getResult:function(e,t,a,s){var i=this,l="http://172.16.10.21:5000";for(var r in this.accept="",this.planCellList)delete this.planCellList[r];for(var n in this.resultCellList)delete this.resultCellList[n];(function(e,t,a,s){return ge.a.get(fe+"/acceptCompare",{params:{bscID_guihua:e,cellID_guihua:t,bscID_yanshou:a,cellID_yanshou:s}}).then(function(e){return e.data})})(e,t,a,s).then(function(e){0===e.code?(i.similar=parseInt(100*e.data.similar),1===e.data.accept?i.accept="通过":0===e.data.accept&&(i.accept="不通过"),i.planCellList=e.data.guihuaCell,i.planCellList.fileUrl=l+i.planCellList.fileUrl,i.resultCellList=e.data.yanshouCell,i.resultCellList.fileUrl=l+i.resultCellList.fileUrl,i.changeData("planCellList"),i.changeData("resultCellList")):i.errorMsg(e.code,i)})},changeData:function(e){if("planCellList"===e){var t=!0,a=!1,s=void 0;try{for(var i,l=p()(this.planCellList.obscureObjects);!(t=(i=l.next()).done);t=!0){var r=i.value,n=!0,o=!1,c=void 0;try{for(var u,d=p()(r.depthRatePairs);!(n=(u=d.next()).done);n=!0){var h=u.value;h.rate=parseInt(100*h.rate);var m="";switch(h.depthRegionIdx){case 0:m="0-50m:";break;case 1:m="50-100m:";break;case 2:m="100-300m:";break;case 3:m="大于300m:"}h.depthRegionIdx=m}}catch(e){o=!0,c=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw c}}}}catch(e){a=!0,s=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw s}}var g=!0,f=!1,v=void 0;try{for(var b,I=p()(this.planCellList.recognizeObjects);!(g=(b=I.next()).done);g=!0){var k=b.value;k.rate=parseInt(100*k.rate)}}catch(e){f=!0,v=e}finally{try{!g&&I.return&&I.return()}finally{if(f)throw v}}var C=!0,P=!1,_=void 0;try{for(var w,L=p()(this.planCellList.recognizeScenes);!(C=(w=L.next()).done);C=!0){var D=w.value;D.confidence=parseInt(100*D.confidence)}}catch(e){P=!0,_=e}finally{try{!C&&L.return&&L.return()}finally{if(P)throw _}}}else if("resultCellList"===e){var y=!0,A=!1,x=void 0;try{for(var T,N=p()(this.resultCellList.obscureObjects);!(y=(T=N.next()).done);y=!0){var R=T.value,F=!0,S=!1,M=void 0;try{for(var E,U=p()(R.depthRatePairs);!(F=(E=U.next()).done);F=!0){var $=E.value;$.rate=parseInt(100*$.rate);var B="";switch($.depthRegionIdx){case 0:B="0-50m:";break;case 1:B="50-100m:";break;case 2:B="100-300m:";break;case 3:B="大于300m:"}$.depthRegionIdx=B}}catch(e){S=!0,M=e}finally{try{!F&&U.return&&U.return()}finally{if(S)throw M}}}}catch(e){A=!0,x=e}finally{try{!y&&N.return&&N.return()}finally{if(A)throw x}}var j=!0,q=!1,z=void 0;try{for(var O,H=p()(this.resultCellList.recognizeObjects);!(j=(O=H.next()).done);j=!0){var Q=O.value;Q.rate=parseInt(100*Q.rate)}}catch(e){q=!0,z=e}finally{try{!j&&H.return&&H.return()}finally{if(q)throw z}}var V=!0,G=!1,Z=void 0;try{for(var W,K=p()(this.resultCellList.recognizeScenes);!(V=(W=K.next()).done);V=!0){var X=W.value;X.confidence=parseInt(100*X.confidence)}}catch(e){G=!0,Z=e}finally{try{!V&&K.return&&K.return()}finally{if(G)throw Z}}}},clickImg:function(e){0===e?this.showBigImg.flag1=!0:1===e&&(this.showBigImg.flag2=!0)},viewImg:function(e){0===e?this.showBigImg.flag1=!1:1===e&&(this.showBigImg.flag2=!1)}},components:{cellResult:a("VU/8")({name:"cellResult",props:["fileID","fileUrl","obscureObjects","recognizeObjects","recognizeScenes"],data:function(){return{}},methods:{clickImg:function(e){this.$emit("clickImg")}}},ke,!1,function(e){a("st7R")},"data-v-95f7c50a",null).exports,bigImg:M}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comparisonCell"},[a("div",{staticClass:"left"},["{}"!==JSON.stringify(e.planCellList)?a("cell-result",e._b({ref:"planCell",on:{clickImg:function(t){e.clickImg(0)}}},"cell-result",e.planCellList,!1)):a("div",{staticClass:"noData"},[e._v("该小区无合成图数据")])],1),e._v(" "),a("big-img",{directives:[{name:"show",rawName:"v-show",value:e.showBigImg.flag1,expression:"showBigImg.flag1"}],ref:"img1",attrs:{imgSrc:e.showBigImg.flag1?e.planCellList.fileUrl:""},on:{clickit:function(t){e.viewImg(0)}}}),e._v(" "),a("div",{staticClass:"middle"},[a("el-progress",{attrs:{type:"circle",percentage:e.similar,width:parseInt("100")}}),e._v(" "),a("div",{staticClass:"note similar"},[e._v("相似度")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPass,expression:"showPass"}],staticClass:"note pass"},[e._v("验收："+e._s(e.accept))])],1),e._v(" "),a("div",{staticClass:"right"},["{}"!==JSON.stringify(e.planCellList)?a("cell-result",e._b({ref:"resultCell",on:{clickImg:function(t){e.clickImg(1)}}},"cell-result",e.resultCellList,!1)):a("div",{staticClass:"noData"},[e._v("该小区无合成图数据")])],1),e._v(" "),a("big-img",{directives:[{name:"show",rawName:"v-show",value:e.showBigImg.flag2,expression:"showBigImg.flag2"}],ref:"img2",attrs:{imgSrc:e.showBigImg.flag2?e.resultCellList.fileUrl:""},on:{clickit:function(t){e.viewImg(1)}}})],1)},staticRenderFns:[]};var _e=a("VU/8")(Ce,Pe,!1,function(e){a("q+yL"),a("daaa")},"data-v-23987530",null).exports,we={name:"cellCheck",data:function(){return{showPass:!0,cellArray:[],selectedCell:{planeBscId:"",planeCellId:"",resultBscId:"",resultCellId:""},showResult:!1}},mounted:function(){this.getCell()},methods:{getCell:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/cell");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;e.cellArray.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},comparison:function(){this.selectedCell.planeCellId===this.selectedCell.resultCellId?this.errorMsg(61,this):(this.getBscID("planeBscId",this.selectedCell.planeCellId),this.getBscID("resultBscId",this.selectedCell.resultCellId),this.showResult=!0,this.$refs.comparisonCell.getResult(this.selectedCell.planeBscId,this.selectedCell.planeCellId,this.selectedCell.resultBscId,this.selectedCell.resultCellId))},getBscID:function(e,t){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(this.cellArray);!(a=(l=r.next()).done);a=!0){var n=l.value;if(n.cellID===t){this.selectedCell[e]=n.bscID;break}}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}},components:{comparisonCell:_e}},Le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cellCheck"},[a("el-form",{staticClass:"form-setting",attrs:{inline:!0,model:e.selectedCell}},[a("el-form-item",{attrs:{label:"选择小区(规划)："}},[a("el-select",{attrs:{placeholder:"请选择小区",size:"mini"},model:{value:e.selectedCell.planeCellId,callback:function(t){e.$set(e.selectedCell,"planeCellId",t)},expression:"selectedCell.planeCellId"}},e._l(e.cellArray,function(e){return a("el-option",{key:e.cellID,attrs:{label:e.cellName,value:e.cellID}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择小区(验收)："}},[a("el-select",{attrs:{placeholder:"请选择小区",size:"mini"},model:{value:e.selectedCell.resultCellId,callback:function(t){e.$set(e.selectedCell,"resultCellId",t)},expression:"selectedCell.resultCellId"}},e._l(e.cellArray,function(e){return a("el-option",{key:e.cellID,attrs:{label:e.cellName,value:e.cellID}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.comparison}},[e._v("验收比对")])],1)],1),e._v(" "),a("div",{staticClass:"comparsion"},[a("comparisonCell",{directives:[{name:"show",rawName:"v-show",value:e.showResult,expression:"showResult"}],ref:"comparisonCell",attrs:{showPass:e.showPass}})],1)],1)},staticRenderFns:[]};var De={name:"cellProgramme",data:function(){return{selectedCell:{cellID:"",bscID:""},showPass:!1,showData:!1,cellArray:[],tableData:[],yanshouCell:{cellID:"",bscID:""},currentRow:null}},mounted:function(){this.getCell()},methods:{getCell:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/cell");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;e.cellArray.push(n)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentRow=e,this.yanshouCell.bscID=e.bscID,this.yanshouCell.cellID=e.cellID,this.showComparisonData()},setCurrent:function(e){this.$refs.singleTable.setCurrentRow(e),this.yanshouCell.bscID=e.bscID,this.yanshouCell.cellID=e.cellID},getBscID:function(){var e=!0,t=!1,a=void 0;try{for(var s,i=p()(this.cellArray);!(e=(s=i.next()).done);e=!0){var l=s.value;if(l.cellID===this.selectedCell.cellID){this.selectedCell.bscID=l.bscID;break}}}catch(e){t=!0,a=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw a}}this.getSimilarCell()},getSimilarCell:function(){var e,t,a=this;this.tableData.splice(0,this.tableData.length),this.showData=!1,(e=this.selectedCell.bscID,t=this.selectedCell.cellID,ge.a.get(fe+"/planCompareTop/"+e+"/"+t).then(function(e){return e.data})).then(function(e){if(0===e.code)if(0!==e.data.compareCells.length){var t=!0,s=!1,i=void 0;try{for(var l,r=p()(e.data.compareCells);!(t=(l=r.next()).done);t=!0){var n=l.value;n.similar=parseInt(100*n.similar)+"%";var o=a.addDetail(n);a.tableData.push(o)}}catch(e){s=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(s)throw i}}a.setCurrent(a.tableData[0]),a.showComparisonData()}else a.errorMsg(62,a);else a.errorMsg(e.code,a)})},addDetail:function(e){var t=["longitude","latitude","directAngle","elevationAngle"],a=!0,s=!1,i=void 0;try{for(var l,r=p()(this.cellArray);!(a=(l=r.next()).done);a=!0){var n=l.value;if(n.cellID===e.cellID){var o=!0,c=!1,u=void 0;try{for(var d,h=p()(t);!(o=(d=h.next()).done);o=!0){var m=d.value;e[m]=n[m]}}catch(e){c=!0,u=e}finally{try{!o&&h.return&&h.return()}finally{if(c)throw u}}}}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}return e},showComparisonData:function(){this.$refs.comparisonCell.getResult(this.selectedCell.bscID,this.selectedCell.cellID,this.yanshouCell.bscID,this.yanshouCell.cellID),this.showData=!0}},components:{comparisonCell:_e}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"topArea"},[e._v("\n    选择小区：\n    "),e._v(" "),a("el-select",{attrs:{placeholder:"请选择小区",size:"mini"},model:{value:e.selectedCell.cellID,callback:function(t){e.$set(e.selectedCell,"cellID",t)},expression:"selectedCell.cellID"}},e._l(e.cellArray,function(e){return a("el-option",{key:e.cellID,attrs:{label:e.cellName,value:e.cellID}})})),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getBscID}},[e._v("规划查询")])],1),e._v(" "),a("div",{staticClass:"cellTab"},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"bscName",label:"基站名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{property:"bscID",label:"基站ID",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{property:"cellName",label:"小区名称"}}),e._v(" "),a("el-table-column",{attrs:{property:"cellID",label:"小区ID"}}),e._v(" "),a("el-table-column",{attrs:{property:"longitude",label:"经度"}}),e._v(" "),a("el-table-column",{attrs:{property:"latitude",label:"纬度"}}),e._v(" "),a("el-table-column",{attrs:{property:"directAngle",label:"方向角"}}),e._v(" "),a("el-table-column",{attrs:{property:"elevationAngle",label:"下倾角"}}),e._v(" "),a("el-table-column",{attrs:{property:"similar",label:"相似度"}})],1)],1),e._v(" "),a("div",{staticClass:"showCell"},[a("comparisonCell",{directives:[{name:"show",rawName:"v-show",value:e.showData,expression:"showData"}],ref:"comparisonCell",attrs:{showPass:e.showPass}})],1)])},staticRenderFns:[]};var Ae={name:"apply",data:function(){return{}},components:{cellCheck:a("VU/8")(we,Le,!1,function(e){a("w6+n"),a("5J8+")},"data-v-9e56c680",null).exports,cellProgramme:a("VU/8")(De,ye,!1,function(e){a("52we"),a("8Q3I")},"data-v-18996514",null).exports}},xe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container apply"},[t("div",{staticClass:"TopTitle"},[this._v("应用案例")]),this._v(" "),t("el-tabs",{staticClass:"thisTab",attrs:{type:"border-card"}},[t("el-tab-pane",{attrs:{label:"小区规划"}},[t("cell-programme")],1),this._v(" "),t("el-tab-pane",{attrs:{label:"小区验收"}},[t("cell-check")],1)],1)],1)},staticRenderFns:[]};var Te=a("VU/8")(Ae,xe,!1,function(e){a("Zf3Q")},"data-v-4019ae0d",null).exports,Ne={inject:["reload"],data:function(){return{msg:"登录",isLogin:!1,userID:"",passwd:"",loading:!1,userList:[]}},created:function(){},methods:{login:function(){""!==this.account&&""!==this.password&&this.submit()},submit:function(){var e=this;this.loading=!0;var t=new URLSearchParams;t.append("userID",this.userID),t.append("passwd",this.passwd);var a=this.setAPIPath("/login");this.$axios.post(a,t).then(function(t){0===t.data.code?(e.loading=!1,e.openMsg("登录成功！","success",e),e.openSuccess(t)):(setTimeout(function(){e.loading=!1},1e3),e.openMsg("登录失败！账号名或密码错误！","error",e))}).catch(function(t){setTimeout(function(){e.loading=!1},1e3),e.openMsg("网络错误","error",e),console.log(t)})},openSuccess:function(e){this.setCookie("userID",e.config.data,1296e6),this.isLogin=!0,this.userID=this.getCookie("userID"),this.setUserType(),this.reload()},setUserType:function(){var e=this,t=new URLSearchParams,a=this.setAPIPath("/user");this.$axios.get(a,t).then(function(t){if(0===t.data.code){var a=!0,s=!1,i=void 0;try{for(var l,r=p()(t.data.data);!(a=(l=r.next()).done);a=!0){var n=l.value;if(n.userID===e.userID){e.setCookie("userType",n.userType,1296e6);break}}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}else e.errorMsg(t.data.code,e)}).catch(function(e){console.log(e)})}}},Re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container login"},[a("el-card",{staticClass:"card",attrs:{shadow:"always"}},[a("div",{staticClass:"title"},[e._v(e._s(e.msg))]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入用户ID"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null}},model:{value:e.userID,callback:function(t){e.userID=t},expression:"userID"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"fa fa-user-o ",attrs:{"aria-hidden":"true"}})])],2),e._v(" "),a("el-input",{attrs:{placeholder:"请输入密码",type:"password"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null}},model:{value:e.passwd,callback:function(t){e.passwd=t},expression:"passwd"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"fa fa-lock",attrs:{"aria-hidden":"true"}})])],2),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"button",attrs:{size:"medium",autofocus:""},on:{click:e.submit,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null}}},[e._v("登录")])],1)],1)},staticRenderFns:[]};var Fe=a("VU/8")(Ne,Re,!1,function(e){a("Kjef"),a("j+xH")},"data-v-0d2fdfa7",null).exports,Se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container register"},[a("el-card",{staticClass:"card",attrs:{shadow:"always"}},[a("div",{staticClass:"title"},[e._v(e._s(e.msg))]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-position":"right",model:e.ruleForm,rules:e.rules,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"用户ID",prop:"Id"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入用户ID"},model:{value:e.ruleForm.Id,callback:function(t){e.$set(e.ruleForm,"Id",t)},expression:"ruleForm.Id"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"用户类型"},slot:"prepend",model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[a("el-option",{attrs:{label:"管理员",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"发布人员",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"拍摄人员",value:"2"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名称",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入电话号码"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"+86"},slot:"prepend",model:{value:e.ruleForm.phoneSelect,callback:function(t){e.$set(e.ruleForm,"phoneSelect",t)},expression:"ruleForm.phoneSelect"}},[a("el-option",{attrs:{label:"+87",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"+88",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"+89",value:"3"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"归属地",prop:"location"}},[a("el-input",{model:{value:e.ruleForm.location,callback:function(t){e.$set(e.ruleForm,"location",t)},expression:"ruleForm.location"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"passwordAgain"}},[a("el-input",{model:{value:e.ruleForm.passwordAgain,callback:function(t){e.$set(e.ruleForm,"passwordAgain",t)},expression:"ruleForm.passwordAgain"}})],1)],1),e._v(" "),a("el-button",{staticClass:"button",attrs:{size:"medium"}},[e._v("注册")])],1)],1)},staticRenderFns:[]};var Me=a("VU/8")({data:function(){return{msg:"注册",ruleForm:{type:"",name:"",Id:"",phone:"",phoneSelect:"",email:"",location:"",password:"",passwordAgain:""},rules:{Id:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],passwordAgain:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}]}}}},Se,!1,function(e){a("dIu/"),a("4+h7")},"data-v-0036d83f",null).exports;a("5W1q");s.default.use(h.a),s.default.use(u.a);var Ee=new u.a({routes:[{path:"/App",name:"App",component:c},{path:"/home/:userID",name:"home",component:C},{path:"/missionDetail/:userID",name:"missionDetail",component:T},{path:"/inquire/:userID",name:"inquire",component:X},{path:"/scene/:userID",name:"scene",component:$},{path:"/statistics/:userID",name:"statistics",component:J},{path:"/system/:userID",name:"system",component:Ie},{path:"/apply/:userID",name:"apply",component:Te},{path:"/mission/:userID",name:"mission",component:w},{path:"/home/login/:userID",name:"login",component:Fe},{path:"/home/register/:userID",name:"register",component:Me},{path:"/system/addUser/:userID",name:"addUser",component:oe},{path:"/system/addCell/:userID",name:"addCell",component:me}]}),Ue=a("8+8L"),$e=a("/IwO"),Be=a.n($e);function je(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?t[2]:null}function qe(e,t,a){a.$message({showClose:!0,message:e,type:t})}function ze(e,t){var a=3.141592653589793,s=6378245,i=.006693421622965943,l=function(e,t){var a=3.141592653589793,s=2*e-100+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return s+=2*(20*Math.sin(6*e*a)+20*Math.sin(2*e*a))/3,s+=2*(20*Math.sin(t*a)+40*Math.sin(t/3*a))/3,s+=2*(160*Math.sin(t/12*a)+320*Math.sin(t*a/30))/3}(t-105,e-35),r=function(e,t){var a=3.141592653589793,s=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return s+=2*(20*Math.sin(6*e*a)+20*Math.sin(2*e*a))/3,s+=2*(20*Math.sin(e*a)+40*Math.sin(e/3*a))/3,s+=2*(150*Math.sin(e/12*a)+300*Math.sin(e/30*a))/3}(t-105,e-35),n=e/180*a,o=Math.sin(n);o=1-i*o*o;var c=Math.sqrt(o);return{lat:l=180*l/(s*(1-i)/(o*c)*a),lon:r=180*r/(s/c*Math.cos(n)*a)}}function Oe(e,t){return t<72.004||t>137.8347||(e<.8293||e>55.8271)}function He(e,t){if(Oe(e,t))return{lat:e,lon:t};var a=ze(e,t);return{lat:e+a.lat,lon:t+a.lon}}s.default.config.productionTip=!1,s.default.use(h.a),s.default.use(Be.a),s.default.use(Ue.a),s.default.use(Ee),s.default.prototype.$axios=ge.a,s.default.use(Be.a),Be.a.initAMapApiLoader({key:"b780b44f8f55a82fede8eca6418afd15",plugin:["AMap.Autocomplete","AMap.PlaceSearch","AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PolyEditor","AMap.CircleEditor"],v:"1.4.4"}),s.default.prototype.setCookie=function(e,t,a){var s=new Date;if(s.setDate(s.getDate()+a),isNaN(t))var i=t.split(/[=&]/g)[1];else i=t;document.cookie=e+"="+escape(i)+(null==a?"":";expires="+s.toGMTString())},s.default.prototype.setUrlCookie=function(e,t,a){var s=new Date;s.setDate(s.getDate()+a),document.cookie=e+"="+escape(t)+(null==a?"":";expires="+s.toGMTString())},s.default.prototype.getCookie=je,s.default.prototype.delCookie=function(e){var t=new Date;t.setTime(t.getTime()-1);var a=je(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())},s.default.prototype.openMsg=qe,s.default.prototype.errorMsg=function(e,t){switch(e){case 1:qe("失败，用户名或密码错误","error",t);break;case 2:qe("失败，该用户已存在，新增失败","error",t);break;case 3:qe("失败，该用户已删除，更新/删除失败","error",t);break;case 4:qe("失败，该用户无权限","error",t);break;case 5:qe("失败，用户未登录，请先登录后再签到","error",t);break;case 6:qe("失败，用户位置距离小区太远，签到失败","error",t);break;case 7:qe("失败，不能设置该用户类型，admin只能是管理员类型，其他用户不能为管理员类型","error",t);break;case 8:qe("失败，admin不能被删除","error",t);break;case 10:qe("失败，该小区已有一个任务，不能增加","error",t);break;case 11:qe("失败，该小区ID不存在","error",t);break;case 12:qe("失败，该小区已存在","error",t);break;case 13:qe("失败，该小区任务图片未上传完.","error",t);break;case 14:qe("失败，小区的识别结果正在计算过程中，请稍后重试","error",t);break;case 20:qe("失败，该任务已删除","error",t);break;case 21:qe("失败，任务已开始","error",t);break;case 22:qe("失败，任务设置的拍摄方向角不合适","error",t);break;case 23:qe("失败，未发布的任务不能开始","error",t);break;case 24:qe("未完成任务无需修改为重拍","error",t);break;case 25:qe("没有已完成的任务，没有生成特征","error",t);break;case 26:qe("任务没有合成图","error",t);break;case 30:qe("失败，上传未选择文件","error",t);break;case 31:qe("失败，文件格式不对，请上传jpg/jpeg格式文件。","error",t);break;case 32:qe("失败，该图片打不开。","error",t);break;case 33:qe("失败，图片不存在","error",t);break;case 34:qe("失败，图片exif信息错误","error",t);break;case 35:qe("失败，图片经纬度不合格","error",t);break;case 36:qe("失败，图片方向角不合格","error",t);break;case 37:qe("失败，图片下倾角不合格","error",t);break;case 50:qe("失败，数据库错误，请稍后重试","error",t);break;case 60:qe("失败，更新配置参数失败","error",t);break;case 61:qe("请选择不同的小区！","error",t);break;case 62:qe("没有符合该置信度的小区，请在系统管理中修改应用参数置信度！","error",t)}},s.default.prototype.setAPIPath=function(e){return"http://172.16.10.21:5000"+e},s.default.prototype.dateFormat=function(e,t){var a=new Date(1e3*e),s=a.getFullYear(),i=a.getMonth()+1,l=a.getDate(),r=a.getHours(),n=a.getMinutes(),o=a.getSeconds();return 1===t?s+"-"+i+"-"+l:s+"-"+i+"-"+l+" "+r+":"+n+":"+o},s.default.prototype.setStorage=function(e,t){window.sessionStorage.setItem(e,t)},s.default.prototype.getStorage=function(e){var t=window.sessionStorage.getItem(e);return JSON.parse(t)},s.default.prototype.delStorage=function(e){window.sessionStorage.removeItem(e)},s.default.prototype.gcjToWgs=He,s.default.prototype.gcjToWgsExactly=function(e,t){for(var a,s,i=.01,l=.01,r=e-i,n=t-l,o=e+i,c=t+l,u=0;;){var d=He(a=(r+o)/2,s=(n+c)/2);if(i=d.lat-e,l=d.lon-t,Math.abs(i)<1e-9&&Math.abs(l)<1e-9)break;if(i>0?o=a:r=a,l>0?c=s:n=s,++u>1e4)break}return{lat:a,lon:s}},s.default.prototype.wgsToGcj=function(e,t){if(Oe(e,t))return{lat:e,lon:t};var a=ze(e,t);return{lat:e+a.lat,lon:t+a.lon}},new s.default({el:"#app",render:function(e){return e(c)},router:Ee,created:function(){this.checkLogin()},methods:{checkLogin:function(){this.getCookie("")&&this.$router.push("/home/:userID")}}})},RgXu:function(e,t){},XI1a:function(e,t){},YYjt:function(e,t){},Zf3Q:function(e,t){},Zvyo:function(e,t){},aHZT:function(e,t){},"d/6q":function(e,t,a){e.exports=a.p+"static/img/news.41bd61a.png"},"dIu/":function(e,t){},daaa:function(e,t){},eet9:function(e,t){},gVQo:function(e,t){e.exports="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAGcAAABkCAYAAACb1S5XAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAqySURBVHhe7dtZyxXHGgXgcowao3GOMzHOimMUBxTjhahRlPwD/1lucyWCA4oYIg44i8bZOKHROM+zOec8Rd7vbOQzh5OL3SXWgqZ3V1dV916r1vtW1+7d5V//QaooEl3/2lcUiCpOwajiFIwqTsGo4hSMKk7BqOIUjCpOwajiFIwqTsGo4hSMKk7BqOIUjCpOwajiFIwqTsGo4hSMKk7BqOIUjCpOwajiFIwqTsGo4hSMKk7BqOIUjCpOwajiFIwqTsGo4hSMKk7BaPwvIH/++Wfq2rVrevPmTXIrPXr0yOU+216/fp3evXuX+vbtm+s+e/YsPX78OD18+DC9ffs2n3v58mX64osvUs+ePVOvXr3Sl19+mT7//PPUrVu31KVLl9yfuup99tlnHdfQn/NRpzQ0Lg5RiOM2unfvnssQiTDC9O7dO5ddvXo1bzdu3Eh3797N9QmjfZ8+fdLTp09zGZGI069fvzRx4sQ0ZsyYLJhrdAZ9OFeiQEWIYyQTxEg22pUh1PHly5fTkSNH0u3btzP5/fv3T6NGjUrjxo3L7QioDdcgWL2zZ8+mBw8epFevXmVxp0+fniZMmJAGDRrUcU2CaKfP6pwPAIFCDSF8JgqyhK2DBw+m8+fPZzKnTp2apkyZkgYPHpyd8nfwlR49epRddvz48XTlypU0fvz4tHjx4jRy5Mh8vlWUD7mqaRSRc5AUrhFmfv/993Ts2LHsGqGJKNwSYc8tP3/+PDuHY7TRNuA4QiJHHjhwIJ05cybnnLlz56Zp06blsKefuG6JaFwc4AwkcZC88ssvv6QnT56kBQsWpNmzZ2fx3KZ66gCX3b9/PxNLCCIRi/PCfcRQps7NmzfTzz//nK5fv56WLFmS5s2bl+vYOIegoK57caxtkyhCHDMwBEnqu3btyiENeTNnzsxkESWIEqI4QU4hoFncixcvshCcJReZqXHI0KFDM9Fcpp5+w0Vz5szJYS5ADFREiOU4gjeJxsUhjByCjB9//DE7Yvny5TnHxHlkI3Tbtm1ZELMxyZ2YiBe+iEcgdW/dupXLCLVw4cI0ZMiQTLgBYL9p06Z04cKFtG7duvTNN99k94BzBI7jptG4OBGSdu/enQ4dOpTJXLRoUSadMIh1zuSAiyJ8EUbIMxNTl7hcx2W+EqdwGYFWrlyZp9ja24i4devW7KQffvghDRw4MN+LdkFHhLwm0fg0BdkXL15MJ0+ezDMp4QxBwgthNm7cmPbt25fJHjZsWD4nBMWx/PLVV1/ltvriDsneg6rEb3Lx008/pTt37mRRtVdHyOQUohMXWh0UIjWJIuaQhw8fzoTLAUEgR+3Zsyc/sxABcXILIFd44xYhsTVPAMfpR3gbPXp0Ltu5c2d2m7bOmf2NHTs29084jgPX4a6mXQNtEwfhNsSB0AIeGiX3r7/+OhMp5yDQ843p9PDhw/PIRijy5QSbY05BZLghCHXOZ/WIaE+YzZs352Pn5CTucU441YZAzhkon5Q4vmzrF0YqSMzKJ02alI8RTozTp09nN7TO1CLUxP59RP8xEBzHXh+WfeQZrgS5xozOAFFeGtoe1mKkG7GccO3atTzDsgYWI9ezDrIs1ajLFRGy/l+EYPb6379/fx4AhLfnWK4SAl1HebRpGo2Ig2gEWGIR3iT0EA0uXbrUMeIRqj7iCPpPoT8TBcs5Ebb0LWwaHFwVcI5ITaOt4vjCRLBHllxjViU5x0iWEyRoxyYAwpHPBAoB/+nI1tba3K+//pr70N+AAQPyc5PQJtwpDwc1jbZOCHxhX9xnQL7NtDhcEU/7hFLXHmER1hBq0hCOAk6AEK4z8ZTpe8SIEenUqVN/laY8MXAdgyRykfvsrI92o63i+MKtBCLac0q4AuFEQhKCbISKkOZYfYLFwqWtNdy1iuZcK9SL/sB5n9XXp/Nxj+6nabRNnFZCAsqMZsQEkB9OCBHjM9HkKeHQ5yBTKFTOBbG9T24Qru8Qk5AQ7ozrRr2m0TZxWhECtcZ4UB5bZ1AuRwhNcpHwpg9h0VpbEMod3BDCBhybphMPQkB9aBtiwYfuoZ1oRJx44LPnFCM/yoEAnZETLrH8L0c4NuqDWNNvglkxIPj7fQiL6podgus5JibBWh38SYU1RCECob64vbwhxAhTcQ6pHg4RGe1iH3mBeJ6B/BhnAXPLli1px44duZ2+rULoK9rZ4pggsdAJwqE2+iRQ5Lqo3yTa6hzE+uJGt8/IIBAnKEeiMlNbYglN1s58BuEHkbGc88cff+QVht9++y0/RDoGxKqnT9excZZyZR489c19ru1HO9eMNurFpKJJtNU5vnTkF0C8fOEBEOEmB+D3fqIhC+n2NiQLa8ISYhHuxQ0/C3CDvtWxd87PBEi+d+9ebg+zZs3qCHnOE5f4FldBe8dEahptdU6MSkQhR76ZPHlyDkOWcWJ12VO7FWPl9sq4DZkERLi9335Wr16d1q9fn5YuXZpDXUwy9B2vUOkP4T4Tx0AgkH64xoOpnxyUgz5a809TaJs4ra6JUQzW1DjIskqUq2vFWB4w6o1mwslNkRc4xSq2ZE5EI5+QzsfKN/I5E+nqEZBoMUCsess5wlzUD4eXgLaKA+GeOEaWN2wsn1hWAQQhH5kERaS90SzXqKuO2Zn21saQbE0uHGZPXA4jDLG9xUMAbSx2WvlWVzn47P5iEDWNtt4FQm0BRHEF4iRkv0rGuppzcs/333+fBRFqIqlzgzrepvELqrxx4sSJLARiox6B5Cjhb9myZfmYA50/evRoFnT+/Pk57OlfW+3ck+s3jSLevgEke4HD7zpr167NRMUoNmXeu3dvngQY9coQHVs4Mc4hlwDAlRzIdSHOuXPn0vbt23NI/e677/LkQ/vS0Lg4kagR6nnFiPZemVebhBmCIA+xflL2Fo7przyFcCIQxUiP0Y5oM7oVK1ZkMYS1SPBCn0EAGzZsyC50D615sBQU4RzhSCK396aN3DNjxoz8Fg5ykc1Fwptk73lG+DMbM2EI4olpUmDmhXTtTCK8KAKEj/C3Zs2aHEr1H+1LQ+PiuDwSIzw59sKHTUL3WpOprtFtQ6TQ9XfQh7rcCMT0oOqFeGKsWrWq48WP+PquXRqKeG8NichEuvAiUcsL8gwxPAt9++23HT9bq2uvrn24KqAM2UKiV6M4xvOMxVEh0497ptfcGtf9X4I3gcbFQWzcgn1siJdbrJkJTYThJEJ5LpFnCBAjnvMQrD+ieA9BeBT2op2XEAkCrhFOheqcTuDy7wvkmJsIFC9feEhFtKSPSHmEYAQJF6jPIYQBz0qm4zbPQiYWHxOKcA7EbThGPqIjD8kTZmX+IWCLH9s4xHNMPHQKUZK8fGK2RjwiRvizlRi+PoTGxQm8LxJRgkhlpsMRksBxPJginzPCgVwX7ePhUk5yTvnHgmLEidsIkRCKeMcR4gC5ymIiYQvSuUfYcywnxTlbCFXqtLkzFCNOIG7HPoQBTiGQ4xj96iDcnjNCQFCujFiEaT33saA4cSr+i48nO36CqOIUjCpOwajiFIwqTsGo4hSMKk7BqOIUjCpOwajiFIwqTsGo4hSMKk7BqOIUjCpOwajiFIwqTsGo4hSMKk7BqOIUjCpOwajiFIwqTsGo4hSMKk7BqOIUjCpOwajiFIwqTrFI6d+enLjPCb2SdgAAAABJRU5ErkJggg=="},gqfb:function(e,t){},hED0:function(e,t){},hmiD:function(e,t){},hyyO:function(e,t){},"j+xH":function(e,t){},k9V4:function(e,t){},ko1r:function(e,t){},nmjb:function(e,t){},"p3+U":function(e,t){},"q+yL":function(e,t){},qfRu:function(e,t){},rryo:function(e,t){},s71j:function(e,t){},st7R:function(e,t){},t3NY:function(e,t){},tdSZ:function(e,t){},tvR6:function(e,t){},vZwe:function(e,t){},"w6+n":function(e,t){},yy1c:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e04009338442c3eaaecd.js.map